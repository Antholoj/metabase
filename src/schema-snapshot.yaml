databaseChangeLog:
- property:
    name: timestamp_type
    value: timestamp with time zone
    dbms: postgresql,h2
- property:
    name: timestamp_type
    value: timestamp(6)
    dbms: mysql,mariadb
- property:
    name: blob.type
    value: blob
    dbms: mysql,h2,mariadb
- property:
    name: blob.type
    value: bytea
    dbms: postgresql
# In MySQL, use LONGTEXT instead of TEXT (#7006)
- property:
    name: text.type
    value: text
    dbms: postgresql,h2
- property:
    name: text.type
    value: longtext
    dbms: mysql,mariadb
# databasechangelog is uppercase in MySQL and H2 but lower-case in Postgres for reasons
- property:
    name: databasechangelog.name
    value: DATABASECHANGELOG
    dbms: h2,mysql,mariadb
- property:
    name: databasechangelog.name
    value: databasechangelog
    dbms: postgresql
# in MySQL, use bit(1) for booleans instead of tinyint
- property:
    name: boolean.type
    value: boolean
    dbms: postgresql,h2
- property:
    name: boolean.type
    value: bit(1)
    dbms: mysql,mariadb

- objectQuotingStrategy: QUOTE_ALL_OBJECTS

- changeSet:
    id: v00.00-000
    validCheckSum: 8:a59595109e74e7a2678a1b0dfd25f74a
    author: qnkhuat
    comment: Initialze metabase
    preConditions:
      - onFail: MARK_RAN
      - not:
        - tableExists:
            tableName: core_user
    changes:
      - sqlFile:
          dbms: postgresql
          path: initialization/metabase_postgres.sql
          relativeToChangelogFile: true
      - sqlFile:
          dbms: mysql,mariadb
          path: initialization/metabase_mysql.sql
          relativeToChangelogFile: true
      - sqlFile:
          dbms: h2
          path: initialization/metabase_h2.sql
          relativeToChangelogFile: true

- changeSet:
    id: v45.00-1
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: card_bookmark_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        tableName: card_bookmark
- changeSet:
    id: v45.00-2
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: collection_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: TEXT
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValue: /
            name: location
            type: VARCHAR(254)
        - column:
            name: personal_owner_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: slug
            type: VARCHAR(510)
        - column:
            name: namespace
            type: VARCHAR(254)
        - column:
            name: authority_level
            type: VARCHAR(255)
        - column:
            name: entity_id
            type: CHAR(21)
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: Timestamp of when this Collection was created.
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: type
            remarks: This is used to differentiate instance-analytics collections
              from all other collections.
            type: VARCHAR(256)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_sample
            remarks: Is the collection part of the sample content?
            type: BOOLEAN
        - column:
            name: archive_operation_id
            remarks: The UUID of the trash operation. Each time you trash a collection
              subtree, you get a unique ID.
            type: CHAR(36)
        - column:
            name: archived_directly
            remarks: Whether the item was trashed independently or as a subcollection
            type: BOOLEAN
        tableName: collection
- changeSet:
    id: v45.00-3
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: collection_bookmark_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: collection_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        tableName: collection_bookmark
- changeSet:
    id: v45.00-4
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: dashboard_bookmark_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dashboard_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        tableName: dashboard_bookmark
- changeSet:
    id: v45.00-5
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: login_history_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: timestamp
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            name: session_id
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: device_id
            type: CHAR(36)
        - column:
            constraints:
              nullable: false
            name: device_description
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: ip_address
            type: TEXT
        tableName: login_history
- changeSet:
    id: v45.00-6
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: metabase_database_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: details
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: engine
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_sample
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: is_full_sync
            type: BOOLEAN
        - column:
            name: points_of_interest
            type: TEXT
        - column:
            name: caveats
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValue: 0 50 * * * ? *
            name: metadata_sync_schedule
            type: VARCHAR(254)
        - column:
            defaultValue: NULL::character varying
            name: cache_field_values_schedule
            type: VARCHAR(254)
        - column:
            name: timezone
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_on_demand
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: auto_run_queries
            type: BOOLEAN
        - column:
            name: refingerprint
            type: BOOLEAN
        - column:
            name: cache_ttl
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValue: complete
            name: initial_sync_status
            type: VARCHAR(32)
        - column:
            name: creator_id
            type: INTEGER
        - column:
            name: settings
            type: TEXT
        - column:
            name: dbms_version
            remarks: A JSON object describing the flavor and version of the DBMS.
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_audit
            remarks: Only the app db, visible to admins via auditing should have this
              set true.
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: uploads_enabled
            remarks: Whether uploads are enabled for this database
            type: BOOLEAN
        - column:
            name: uploads_schema_name
            remarks: The schema name for uploads
            type: TEXT
        - column:
            name: uploads_table_prefix
            remarks: The prefix for upload table names
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_attached_dwh
            remarks: This is an attached data warehouse, do not serialize it and hide
              its details from the UI
            type: BOOLEAN
        - column:
            name: entity_id
            remarks: Random NanoID tag for unique identity.
            type: CHAR(21)
        tableName: metabase_database
- changeSet:
    id: v45.00-7
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: metabase_field_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: base_type
            type: VARCHAR(255)
        - column:
            name: semantic_type
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: active
            type: BOOLEAN
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: preview_display
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: position
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: table_id
            type: INTEGER
        - column:
            name: parent_id
            type: INTEGER
        - column:
            name: display_name
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            defaultValue: normal
            name: visibility_type
            type: VARCHAR(32)
        - column:
            name: fk_target_field_id
            type: INTEGER
        - column:
            name: last_analyzed
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: points_of_interest
            type: TEXT
        - column:
            name: caveats
            type: TEXT
        - column:
            name: fingerprint
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: fingerprint_version
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: database_type
            type: TEXT
        - column:
            name: has_field_values
            type: TEXT
        - column:
            name: settings
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: database_position
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: custom_position
            type: INTEGER
        - column:
            name: effective_type
            type: VARCHAR(255)
        - column:
            name: coercion_strategy
            type: VARCHAR(255)
        - column:
            name: nfc_path
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: database_required
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: json_unfolding
            remarks: Enable/disable JSON unfolding for a field
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: database_is_auto_increment
            remarks: Indicates this field is auto incremented
            type: BOOLEAN
        - column:
            name: database_indexed
            remarks: If the database supports indexing, this column indicate whether
              or not a field is indexed, or is the 1st column in a composite index
            type: BOOLEAN
        - column:
            name: database_partitioned
            remarks: Whether the table is partitioned by this field
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_defective_duplicate
            remarks: Indicates whether column is a defective duplicate field that
              should never have been created.
            type: BOOLEAN
        - column:
            defaultValueComputed: "GENERATED ALWAYS AS (CASE WHEN (is_defective_duplicate\
              \ = true) THEN NULL::integer\n    ELSE\n    CASE\n        WHEN (parent_id\
              \ IS NULL) THEN 0\n        ELSE parent_id\n    END\nEND) STORED"
            name: unique_field_helper
            type: INTEGER
        - column:
            name: entity_id
            remarks: Random NanoID tag for unique identity.
            type: CHAR(21)
        tableName: metabase_field
- changeSet:
    id: v45.00-8
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: metabase_fieldvalues_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: values
            type: TEXT
        - column:
            name: human_readable_values
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: field_id
            type: INTEGER
        - column:
            defaultValueBoolean: false
            name: has_more_values
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValue: full
            name: type
            type: VARCHAR(32)
        - column:
            name: hash_key
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: last_used_at
            remarks: Timestamp of when these FieldValues were last used.
            type: TIMESTAMP WITH TIME ZONE
        tableName: metabase_fieldvalues
- changeSet:
    id: v45.00-9
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: metabase_table_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(256)
        - column:
            name: description
            type: TEXT
        - column:
            name: entity_type
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: active
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: db_id
            type: INTEGER
        - column:
            name: display_name
            type: VARCHAR(256)
        - column:
            name: visibility_type
            type: VARCHAR(254)
        - column:
            name: schema
            type: VARCHAR(254)
        - column:
            name: points_of_interest
            type: TEXT
        - column:
            name: caveats
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: show_in_getting_started
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValue: database
            name: field_order
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            defaultValue: complete
            name: initial_sync_status
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_upload
            remarks: Was the table created from user-uploaded (i.e., from a CSV) data?
            type: BOOLEAN
        - column:
            name: database_require_filter
            remarks: If true, the table requires a filter to be able to query it
            type: BOOLEAN
        - column:
            name: estimated_row_count
            remarks: The estimated row count
            type: BIGINT
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: view_count
            remarks: Keeps a running count of card views
            type: INTEGER
        - column:
            name: entity_id
            remarks: Random NanoID tag for unique identity.
            type: CHAR(21)
        tableName: metabase_table
- changeSet:
    id: v45.00-10
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: metric_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: table_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: definition
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: points_of_interest
            type: TEXT
        - column:
            name: caveats
            type: TEXT
        - column:
            name: how_is_this_calculated
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: show_in_getting_started
            type: BOOLEAN
        - column:
            name: entity_id
            type: CHAR(21)
        tableName: metric
- changeSet:
    id: v45.00-11
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: moderation_review_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: status
            type: VARCHAR(255)
        - column:
            name: text
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: moderated_item_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: moderated_item_type
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            name: moderator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: most_recent
            type: BOOLEAN
        tableName: moderation_review
- changeSet:
    id: v45.00-12
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: native_query_snippet_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: content
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: collection_id
            type: INTEGER
        - column:
            name: entity_id
            type: CHAR(21)
        tableName: native_query_snippet
- changeSet:
    id: v45.00-13
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: permissions_group_membership_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: group_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_group_manager
            type: BOOLEAN
        tableName: permissions_group_membership
- changeSet:
    id: v45.00-14
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: persisted_info_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: database_id
            type: INTEGER
        - column:
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: question_slug
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: table_name
            type: TEXT
        - column:
            name: definition
            type: TEXT
        - column:
            name: query_hash
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: active
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: state
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: refresh_begin
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: refresh_end
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: state_change_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: error
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: creator_id
            type: INTEGER
        tableName: persisted_info
- changeSet:
    id: v45.00-15
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pulse_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            name: name
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: skip_if_empty
            type: BOOLEAN
        - column:
            name: alert_condition
            type: VARCHAR(254)
        - column:
            name: alert_first_only
            type: BOOLEAN
        - column:
            name: alert_above_goal
            type: BOOLEAN
        - column:
            name: collection_id
            type: INTEGER
        - column:
            name: collection_position
            type: SMALLINT
        - column:
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            name: dashboard_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: parameters
            type: TEXT
        - column:
            name: entity_id
            type: CHAR(21)
        tableName: pulse
- changeSet:
    id: v45.00-16
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pulse_card_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: pulse_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: position
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: include_csv
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: include_xls
            type: BOOLEAN
        - column:
            name: dashboard_card_id
            type: INTEGER
        - column:
            name: entity_id
            type: CHAR(21)
        - column:
            defaultValueBoolean: true
            name: format_rows
            remarks: Whether or not to apply formatting to the rows of the export
            type: BOOLEAN
        - column:
            defaultValueBoolean: false
            name: pivot_results
            remarks: Whether or not to apply pivot processing to the rows of the export
            type: BOOLEAN
        tableName: pulse_card
- changeSet:
    id: v45.00-17
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pulse_channel_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: pulse_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: channel_type
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: details
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: schedule_type
            type: VARCHAR(32)
        - column:
            name: schedule_hour
            type: INTEGER
        - column:
            name: schedule_day
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: schedule_frame
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: enabled
            type: BOOLEAN
        - column:
            name: entity_id
            type: CHAR(21)
        - column:
            name: channel_id
            remarks: The channel ID
            type: INTEGER
        tableName: pulse_channel
- changeSet:
    id: v45.00-18
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: report_card_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: display
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: dataset_query
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: visualization_settings
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: database_id
            type: INTEGER
        - column:
            name: table_id
            type: INTEGER
        - column:
            name: query_type
            type: VARCHAR(16)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            name: collection_id
            type: INTEGER
        - column:
            name: public_uuid
            type: CHAR(36)
        - column:
            name: made_public_by_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: enable_embedding
            type: BOOLEAN
        - column:
            name: embedding_params
            type: TEXT
        - column:
            name: cache_ttl
            type: INTEGER
        - column:
            name: result_metadata
            type: TEXT
        - column:
            name: collection_position
            type: SMALLINT
        - column:
            name: entity_id
            type: CHAR(21)
        - column:
            name: parameters
            type: TEXT
        - column:
            name: parameter_mappings
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: collection_preview
            type: BOOLEAN
        - column:
            name: metabase_version
            remarks: Metabase version used to create the card.
            type: VARCHAR(100)
        - column:
            constraints:
              nullable: false
            defaultValue: question
            name: type
            remarks: The type of card, could be 'question', 'model', 'metric'
            type: VARCHAR(16)
        - column:
            name: initially_published_at
            remarks: The timestamp when the card was first published in a static embed
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: cache_invalidated_at
            remarks: An invalidation time that can supersede cache_config.invalidated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: CURRENT_TIMESTAMP
            name: last_used_at
            remarks: The timestamp of when the card is last used
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: view_count
            remarks: Keeps a running count of card views
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived_directly
            remarks: Was this thing trashed directly
            type: BOOLEAN
        - column:
            name: dataset_query_metrics_v2_migration_backup
            remarks: The copy of dataset_query before the metrics v2 migration
            type: TEXT
        - column:
            name: source_card_id
            remarks: The ID of the model or question this card is based on
            type: INTEGER
        - column:
            name: dashboard_id
            remarks: The dashboard that owns the card, if it is a dashboard-internal
              card.
            type: INTEGER
        tableName: report_card
- changeSet:
    id: v45.00-19
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: report_dashboard_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: parameters
            type: TEXT
        - column:
            name: points_of_interest
            type: TEXT
        - column:
            name: caveats
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: show_in_getting_started
            type: BOOLEAN
        - column:
            name: public_uuid
            type: CHAR(36)
        - column:
            name: made_public_by_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: enable_embedding
            type: BOOLEAN
        - column:
            name: embedding_params
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            name: position
            type: INTEGER
        - column:
            name: collection_id
            type: INTEGER
        - column:
            name: collection_position
            type: SMALLINT
        - column:
            name: cache_ttl
            type: INTEGER
        - column:
            name: entity_id
            type: CHAR(21)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: auto_apply_filters
            remarks: Whether or not to auto-apply filters on a dashboard
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValue: fixed
            name: width
            remarks: The value of the dashboard's width setting can be fixed or full.
              New dashboards will be set to fixed
            type: VARCHAR(16)
        - column:
            name: initially_published_at
            remarks: The timestamp when the dashboard was first published in a static
              embed
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: view_count
            remarks: Keeps a running count of dashboard views
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived_directly
            remarks: Was this thing trashed directly
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: last_viewed_at
            remarks: Timestamp of when this dashboard was last viewed
            type: TIMESTAMP WITH TIME ZONE
        tableName: report_dashboard
- changeSet:
    id: v45.00-20
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: revision_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: model
            type: VARCHAR(16)
        - column:
            constraints:
              nullable: false
            name: model_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: timestamp
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: object
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_reversion
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_creation
            type: BOOLEAN
        - column:
            name: message
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: most_recent
            remarks: Whether a revision is the most recent one
            type: BOOLEAN
        - column:
            name: metabase_version
            remarks: Metabase version used to create the revision.
            type: VARCHAR(100)
        tableName: revision
- changeSet:
    id: v45.00-21
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: secret_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: secret_pkey
            defaultValueNumeric: 1
            name: version
            type: INTEGER
        - column:
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: kind
            type: VARCHAR(254)
        - column:
            name: source
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: value
            type: BYTEA
        tableName: secret
- changeSet:
    id: v45.00-22
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: segment_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: table_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            name: description
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: definition
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: points_of_interest
            type: TEXT
        - column:
            name: caveats
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: show_in_getting_started
            type: BOOLEAN
        - column:
            name: entity_id
            type: CHAR(21)
        tableName: segment
- changeSet:
    id: v45.00-23
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: task_history_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: task
            type: VARCHAR(254)
        - column:
            name: db_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: CURRENT_TIMESTAMP
            name: started_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: ended_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: duration
            type: INTEGER
        - column:
            name: task_details
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValue: started
            name: status
            remarks: the status of task history, could be started, failed, success,
              unknown
            type: VARCHAR(21)
        tableName: task_history
- changeSet:
    id: v45.00-24
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: timeline_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(255)
        - column:
            name: description
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            name: icon
            type: VARCHAR(128)
        - column:
            name: collection_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: default
            type: BOOLEAN
        - column:
            name: entity_id
            type: CHAR(21)
        tableName: timeline
- changeSet:
    id: v45.00-25
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: timeline_event_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: timeline_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(255)
        - column:
            name: description
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            name: timestamp
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: time_matters
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: timezone
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            name: icon
            type: VARCHAR(128)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: creator_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        tableName: timeline_event
- changeSet:
    id: v45.00-26
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: bookmark_ordering_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: type
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            name: item_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: ordering
            type: INTEGER
        tableName: bookmark_ordering
- changeSet:
    id: v45.00-27
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: card_label_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: label_id
            type: INTEGER
        tableName: card_label
- changeSet:
    id: v45.00-28
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: report_cardfavorite_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: owner_id
            type: INTEGER
        tableName: report_cardfavorite
- changeSet:
    id: v45.00-29
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: dashboard_favorite_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dashboard_id
            type: INTEGER
        tableName: dashboard_favorite
- changeSet:
    id: v45.00-30
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: report_dashboardcard_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: size_x
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: size_y
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: row
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: col
            type: INTEGER
        - column:
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dashboard_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: parameter_mappings
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: visualization_settings
            type: TEXT
        - column:
            name: entity_id
            type: CHAR(21)
        - column:
            name: action_id
            remarks: The related action
            type: INTEGER
        - column:
            name: dashboard_tab_id
            remarks: The referenced tab id that dashcard is on, it's nullable for
              dashboard with no tab
            type: INTEGER
        tableName: report_dashboardcard
- changeSet:
    id: v45.00-31
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: dashboardcard_series_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dashboardcard_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: position
            type: INTEGER
        tableName: dashboardcard_series
- changeSet:
    id: v45.00-32
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: dependency_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: model
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: model_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dependent_on_model
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: dependent_on_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        tableName: dependency
- changeSet:
    id: v45.00-33
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: dimension_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: field_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: type
            type: VARCHAR(254)
        - column:
            name: human_readable_field_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: entity_id
            type: CHAR(21)
        tableName: dimension
- changeSet:
    id: v45.00-34
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: group_table_access_policy_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: group_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: table_id
            type: INTEGER
        - column:
            name: card_id
            type: INTEGER
        - column:
            name: attribute_remappings
            type: TEXT
        tableName: sandboxes
- changeSet:
    id: v45.00-35
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: label_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: slug
            type: VARCHAR(254)
        - column:
            name: icon
            type: VARCHAR(128)
        tableName: label
- changeSet:
    id: v45.00-36
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: metric_important_field_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: metric_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: field_id
            type: INTEGER
        tableName: metric_important_field
- changeSet:
    id: v45.00-37
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: permissions_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: object
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: group_id
            type: INTEGER
        - column:
            name: perm_value
            remarks: The value of the permission
            type: VARCHAR(64)
        - column:
            name: perm_type
            remarks: The type of the permission
            type: VARCHAR(64)
        - column:
            name: collection_id
            remarks: The linked collection, if applicable
            type: INTEGER
        tableName: permissions
- changeSet:
    id: v45.00-38
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: permissions_group_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            type: VARCHAR(255)
        - column:
            name: entity_id
            remarks: NanoID tag for each user
            type: CHAR(21)
        tableName: permissions_group
- changeSet:
    id: v45.00-39
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_fired_triggers
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_fired_triggers
            name: entry_id
            type: VARCHAR(95)
        - column:
            constraints:
              nullable: false
            name: trigger_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: trigger_group
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: instance_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: fired_time
            type: BIGINT
        - column:
            name: sched_time
            type: BIGINT
        - column:
            constraints:
              nullable: false
            name: priority
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: state
            type: VARCHAR(16)
        - column:
            name: job_name
            type: VARCHAR(200)
        - column:
            name: job_group
            type: VARCHAR(200)
        - column:
            name: is_nonconcurrent
            type: BOOLEAN
        - column:
            name: requests_recovery
            type: BOOLEAN
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-40
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_job_details
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_job_details
            name: job_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_job_details
            name: job_group
            type: VARCHAR(200)
        - column:
            name: description
            type: VARCHAR(250)
        - column:
            constraints:
              nullable: false
            name: job_class_name
            type: VARCHAR(250)
        - column:
            constraints:
              nullable: false
            name: is_durable
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: is_nonconcurrent
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: is_update_data
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: requests_recovery
            type: BOOLEAN
        - column:
            name: job_data
            type: BYTEA
        tableName: qrtz_job_details
- changeSet:
    id: v45.00-41
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_triggers
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_triggers
            name: trigger_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_triggers
            name: trigger_group
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: job_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: job_group
            type: VARCHAR(200)
        - column:
            name: description
            type: VARCHAR(250)
        - column:
            name: next_fire_time
            type: BIGINT
        - column:
            name: prev_fire_time
            type: BIGINT
        - column:
            name: priority
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: trigger_state
            type: VARCHAR(16)
        - column:
            constraints:
              nullable: false
            name: trigger_type
            type: VARCHAR(8)
        - column:
            constraints:
              nullable: false
            name: start_time
            type: BIGINT
        - column:
            name: end_time
            type: BIGINT
        - column:
            name: calendar_name
            type: VARCHAR(200)
        - column:
            name: misfire_instr
            type: SMALLINT
        - column:
            name: job_data
            type: BYTEA
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-42
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: query_cache_pkey
            name: query_hash
            type: BYTEA
        - column:
            constraints:
              nullable: false
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: results
            type: BYTEA
        tableName: query_cache
- changeSet:
    id: v45.00-43
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: query_execution_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: hash
            type: BYTEA
        - column:
            constraints:
              nullable: false
            name: started_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: running_time
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: result_rows
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: native
            type: BOOLEAN
        - column:
            name: context
            type: VARCHAR(32)
        - column:
            name: error
            type: TEXT
        - column:
            name: executor_id
            type: INTEGER
        - column:
            name: card_id
            type: INTEGER
        - column:
            name: dashboard_id
            type: INTEGER
        - column:
            name: pulse_id
            type: INTEGER
        - column:
            name: database_id
            type: INTEGER
        - column:
            name: cache_hit
            type: BOOLEAN
        - column:
            name: action_id
            remarks: The ID of the action associated with this query execution, if
              any.
            type: INTEGER
        - column:
            name: is_sandboxed
            remarks: Is query from a sandboxed user
            type: BOOLEAN
        - column:
            name: cache_hash
            remarks: Hash of normalized query, calculated in middleware.cache
            type: BYTEA
        - column:
            name: embedding_client
            remarks: Used by the embedding team to track SDK usage
            type: VARCHAR(254)
        - column:
            name: embedding_version
            remarks: Used by the embedding team to track SDK version usage
            type: VARCHAR(254)
        - column:
            name: parameterized
            remarks: Whether or not the query has parameters with non-nil values
            type: BOOLEAN
        tableName: query_execution
- changeSet:
    id: v45.00-44
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: view_log_pkey
            name: id
            type: INTEGER
        - column:
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: model
            type: VARCHAR(16)
        - column:
            constraints:
              nullable: false
            name: model_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: timestamp
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: metadata
            type: TEXT
        - column:
            name: has_access
            remarks: Whether the user who initiated the view had read access to the
              item being viewed.
            type: BOOLEAN
        - column:
            name: context
            remarks: The context of the view, can be collection, question, or dashboard.
              Only for cards.
            type: VARCHAR(32)
        - column:
            name: embedding_client
            remarks: Used by the embedding team to track SDK usage
            type: VARCHAR(254)
        - column:
            name: embedding_version
            remarks: Used by the embedding team to track SDK version usage
            type: VARCHAR(254)
        tableName: view_log
- changeSet:
    id: v45.00-45
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: action_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp of when the action was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp of when the action was updated
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: type
            remarks: Type of action
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: model_id
            remarks: The associated model
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            remarks: The name of the action
            type: VARCHAR(254)
        - column:
            name: description
            remarks: The description of the action
            type: TEXT
        - column:
            name: parameters
            remarks: The saved parameters for this action
            type: TEXT
        - column:
            name: parameter_mappings
            remarks: The saved parameter mappings for this action
            type: TEXT
        - column:
            name: visualization_settings
            remarks: The UI visualization_settings for this action
            type: TEXT
        - column:
            name: public_uuid
            remarks: Unique UUID used to in publically-accessible links to this Action.
            type: CHAR(36)
        - column:
            name: made_public_by_id
            remarks: The ID of the User who first publically shared this Action.
            type: INTEGER
        - column:
            name: creator_id
            remarks: The user who created the action
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: archived
            remarks: Whether or not the action has been archived
            type: BOOLEAN
        - column:
            name: entity_id
            remarks: Random NanoID tag for unique identity.
            type: CHAR(21)
        remarks: An action is something you can do, such as run a readwrite query
        tableName: action
- changeSet:
    id: v45.00-46
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: parameter_card_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: most recent modification time
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: creation time
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: card_id
            remarks: ID of the card generating the values
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: parameterized_object_type
            remarks: Type of the entity consuming the values (dashboard, card, etc.)
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: parameterized_object_id
            remarks: ID of the entity consuming the values
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: parameter_id
            remarks: The parameter ID
            type: VARCHAR(36)
        remarks: Join table connecting cards to entities (dashboards, other cards,
          etc.) that use the values generated by the card for filter values
        tableName: parameter_card
- changeSet:
    id: v45.00-47
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: dashboard_tab_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dashboard_id
            remarks: The dashboard that a tab is on
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            remarks: Displayed name of the tab
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: position
            remarks: Position of the tab with respect to others tabs in dashboard
            type: INTEGER
        - column:
            name: entity_id
            remarks: Random NanoID tag for unique identity.
            type: CHAR(21)
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp at which the tab was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp at which the tab was last updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: Join table connecting dashboard to dashboardcards
        tableName: dashboard_tab
- changeSet:
    id: v45.00-48
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: model_index_pkey
            name: id
            type: INTEGER
        - column:
            name: model_id
            remarks: The ID of the indexed model.
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: pk_ref
            remarks: Serialized JSON of the primary key field ref.
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: value_ref
            remarks: Serialized JSON of the label field ref.
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: schedule
            remarks: The cron schedule for when value syncing should happen.
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: state
            remarks: 'The status of the index: initializing, indexed, error, overflow.'
            type: TEXT
        - column:
            name: indexed_at
            remarks: When the status changed
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: error
            remarks: The error message if the status is error.
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp of when these changes were made.
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: creator_id
            remarks: ID of the user who created the event
            type: INTEGER
        remarks: Used to keep track of which models have indexed columns.
        tableName: model_index
- changeSet:
    id: v45.00-49
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: connection_impersonations_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: db_id
            remarks: ID of the database this connection impersonation policy affects
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: group_id
            remarks: ID of the permissions group this connection impersonation policy
              affects
            type: INTEGER
        - column:
            name: attribute
            remarks: User attribute associated with the database role to use for this
              connection impersonation policy
            type: TEXT
        remarks: Table for holding connection impersonation policies
        tableName: connection_impersonations
- changeSet:
    id: v45.00-50
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
            name: table_id
            remarks: Table ID
            type: INTEGER
        - column:
            name: role
            remarks: Role name. NULL indicates the privileges are the current user's
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: select
            remarks: Privilege to select from the table
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: update
            remarks: Privilege to update records in the table
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: insert
            remarks: Privilege to insert records into the table
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: delete
            remarks: Privilege to delete records from the table
            type: BOOLEAN
        remarks: Table for user and role privileges by table
        tableName: table_privileges
- changeSet:
    id: v45.00-51
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: general_permissions_revision_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: before
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: after
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: remark
            type: TEXT
        tableName: application_permissions_revision
- changeSet:
    id: v45.00-52
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: collection_revision_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: before
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: after
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: remark
            type: TEXT
        tableName: collection_permission_graph_revision
- changeSet:
    id: v45.00-53
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: core_session_pkey
            name: id
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: anti_csrf_token
            type: TEXT
        tableName: core_session
- changeSet:
    id: v45.00-54
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: permissions_revision_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: before
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: after
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: remark
            type: TEXT
        tableName: permissions_revision
- changeSet:
    id: v45.00-55
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pulse_channel_recipient_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: pulse_channel_id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            type: INTEGER
        tableName: pulse_channel_recipient
- changeSet:
    id: v45.00-56
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_query_action
            name: action_id
            remarks: The related action
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: database_id
            remarks: The associated database
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: dataset_query
            remarks: The MBQL writeback query
            type: TEXT
        remarks: A readwrite query type of action
        tableName: query_action
- changeSet:
    id: v45.00-57
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: recent_views_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            remarks: The user associated with this view
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: model
            remarks: The name of the model that was viewed
            type: VARCHAR(16)
        - column:
            constraints:
              nullable: false
            name: model_id
            remarks: The ID of the model that was viewed
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: timestamp
            remarks: The time a view was recorded
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValue: view
            name: context
            remarks: The contextual action that netted a recent view.
            type: VARCHAR(256)
        remarks: Used to store recently viewed objects for each user
        tableName: recent_views
- changeSet:
    id: v45.00-58
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: audit_log_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: topic
            remarks: The topic of a given audit event
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: timestamp
            remarks: The time an event was recorded
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: end_timestamp
            remarks: The time an event ended, if applicable
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: user_id
            remarks: The user who performed an action or triggered an event
            type: INTEGER
        - column:
            name: model
            remarks: The name of the model this event applies to (e.g. Card, Dashboard),
              if applicable
            type: VARCHAR(32)
        - column:
            name: model_id
            remarks: The ID of the model this event applies to, if applicable
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: details
            remarks: A JSON map with metadata about the event
            type: TEXT
        remarks: Used to store application events for auditing use cases
        tableName: audit_log
- changeSet:
    id: v45.00-59
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: api_key_pkey
            name: id
            remarks: The ID of the API Key itself
            type: INTEGER
        - column:
            name: user_id
            remarks: The ID of the user who this API Key acts as
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: key
            remarks: The hashed API key
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: key_prefix
            remarks: The first 7 characters of the unhashed key
            type: VARCHAR(7)
        - column:
            constraints:
              nullable: false
            name: creator_id
            remarks: The ID of the user that created this API key
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp when the key was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp when the key was last updated
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: name
            remarks: The user-defined name of the API key.
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: updated_by_id
            remarks: The ID of the user that last updated this API key
            type: INTEGER
        - column:
            name: scope
            remarks: The scope of the API key, if applicable
            type: VARCHAR(64)
        remarks: An API Key
        tableName: api_key
- changeSet:
    id: v45.00-60
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: query_pkey
            name: query_hash
            type: BYTEA
        - column:
            constraints:
              nullable: false
            name: average_execution_time
            type: INTEGER
        - column:
            name: query
            type: TEXT
        tableName: query
- changeSet:
    id: v45.00-61
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: data_permissions_pkey
            name: id
            remarks: The ID of the permission
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: group_id
            remarks: The ID of the associated permission group
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: perm_type
            remarks: The type of the permission (e.g. "data", "collection", "download"...)
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            name: db_id
            remarks: A database ID, for DB and table-level permissions
            type: INTEGER
        - column:
            name: schema_name
            remarks: A schema name, for table-level permissions
            type: VARCHAR(254)
        - column:
            name: table_id
            remarks: A table ID
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: perm_value
            remarks: The value this permission is set to.
            type: VARCHAR(64)
        remarks: A table to store database and table permissions
        tableName: data_permissions
- changeSet:
    id: v45.00-62
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: query_field_pkey
            name: id
            remarks: PK
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            remarks: referenced card
            type: INTEGER
        - column:
            name: field_id
            remarks: referenced field
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: explicit_reference
            remarks: Is the Field referenced directly or via a wildcard
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: column
            remarks: name of the table or card being referenced
            type: VARCHAR(254)
        - column:
            name: table
            remarks: name of the table or card being referenced
            type: VARCHAR(254)
        - column:
            name: table_id
            remarks: track the table directly, in case the field does not exist
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: analysis_id
            remarks: round of analysis
            type: INTEGER
        - column:
            name: schema
            remarks: name of the schema of the table being referenced
            type: VARCHAR(254)
        remarks: Fields used by a card's query
        tableName: query_field
- changeSet:
    id: v45.00-63
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: cache_config_pkey
            name: id
            remarks: Unique ID
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: model
            remarks: Name of an entity model
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: model_id
            remarks: ID of the said entity
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: Timestamp when the config was inserted
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: Timestamp when the config was updated
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: strategy
            remarks: caching strategy name
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: config
            remarks: caching strategy configuration
            type: TEXT
        - column:
            name: state
            remarks: state for strategies needing to keep some data between runs
            type: TEXT
        - column:
            name: invalidated_at
            remarks: indicates when a cache was invalidated last time for schedule-based
              strategies
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: next_run_at
            remarks: keeps next time to run for schedule-based strategies
            type: TIMESTAMP WITH TIME ZONE
        - column:
            defaultValueBoolean: false
            name: refresh_automatically
            remarks: Whether or not we should automatically refresh cache results
              when a cache expires
            type: BOOLEAN
        remarks: Cache Configuration
        tableName: cache_config
- changeSet:
    id: v45.00-64
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: field_usage_pkey
            name: id
            remarks: Unique ID
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: field_id
            remarks: ID of the field
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: query_execution_id
            remarks: referenced query execution
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: used_in
            remarks: which part of the query the field was used in
            type: VARCHAR(25)
        - column:
            name: filter_op
            remarks: filter's operator that applied to the field
            type: VARCHAR(25)
        - column:
            name: aggregation_function
            remarks: the aggregation function that field applied to
            type: VARCHAR(25)
        - column:
            name: breakout_temporal_unit
            remarks: temporal unit options of the breakout
            type: VARCHAR(25)
        - column:
            name: breakout_binning_strategy
            remarks: the strategy of breakout
            type: VARCHAR(25)
        - column:
            name: breakout_binning_num_bins
            remarks: The numbin option of breakout
            type: INTEGER
        - column:
            name: breakout_binning_bin_width
            remarks: The numbin option of breakout
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The time a field usage was recorded
            type: TIMESTAMP WITH TIME ZONE
        remarks: Used to store field usage during query execution
        tableName: field_usage
- changeSet:
    id: v45.00-65
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: user_parameter_value_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            remarks: ID of the User who has set the parameter value
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: parameter_id
            remarks: The parameter ID
            type: VARCHAR(36)
        - column:
            name: value
            remarks: Value of the parameter
            type: TEXT
        - column:
            name: dashboard_id
            remarks: The ID of the dashboard
            type: INTEGER
        remarks: Table holding last set value of a parameter per user
        tableName: user_parameter_value
- changeSet:
    id: v45.00-66
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: cloud_migration_pkey
            name: id
            remarks: Unique ID
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: external_id
            remarks: Matching ID in Cloud for this migration
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: upload_url
            remarks: URL where the backup will be uploaded to
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValue: init
            name: state
            remarks: 'Current state of the migration: init, setup, dump, upload, done,
              error, cancelled'
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            defaultValueNumeric: 0
            name: progress
            remarks: Number between 0 to 100 representing progress as a percentage
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: created_at
            remarks: Timestamp when the config was inserted
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            remarks: Timestamp when the config was updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: Migrate to cloud directly from Metabase
        tableName: cloud_migration
- changeSet:
    id: v45.00-67
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: channel_pkey
            name: id
            remarks: Unique ID
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            remarks: channel name
            type: VARCHAR(254)
        - column:
            name: description
            remarks: channel description
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: type
            remarks: Channel type
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            name: details
            remarks: Channel details, used to store authentication information or
              channel-specific settings
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: active
            remarks: whether the channel is active
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: created_at
            remarks: Timestamp when the channel was inserted
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            remarks: Timestamp when the channel was updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: Channel configurations
        tableName: channel
- changeSet:
    id: v45.00-68
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: query_analysis_pkey
            name: id
            remarks: PK
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            remarks: referenced card
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp of when the analysis was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp of when the analysis was updated
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: status
            remarks: running, failed, or completed
            type: TEXT
        remarks: Parent node for query analysis records
        tableName: query_analysis
- changeSet:
    id: v45.00-69
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: query_table_pkey
            name: id
            remarks: PK
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: card_id
            remarks: referenced card
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: analysis_id
            remarks: round of analysis
            type: INTEGER
        - column:
            name: table_id
            remarks: referenced field
            type: INTEGER
        - column:
            name: schema
            remarks: name of the schema of the table being referenced
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: table
            remarks: name of the table or card being referenced
            type: VARCHAR(254)
        remarks: Tables used by a card's query
        tableName: query_table
- changeSet:
    id: v45.00-70
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: notification_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: payload_type
            remarks: the type of the payload
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: active
            remarks: whether the notification is active
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            name: created_at
            remarks: The timestamp of when the notification was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            remarks: The timestamp of when the notification was updated
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: internal_id
            remarks: the internal id of the notification
            type: VARCHAR(254)
        remarks: join table that connect notification subscriptions and notification
          handlers
        tableName: notification
- changeSet:
    id: v45.00-71
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: notification_subscription_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: notification_id
            remarks: the notification that the subscription is connected to
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: type
            remarks: the type of the subscription
            type: VARCHAR(64)
        - column:
            name: event_name
            remarks: the event name of subscriptions with type :notification-subscription/system-event
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            name: created_at
            remarks: The timestamp of when the subscription was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: cron_schedule
            remarks: the cron schedule for the subscription
            type: VARCHAR(128)
        remarks: which type of trigger a notification is subscribed to
        tableName: notification_subscription
- changeSet:
    id: v45.00-72
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: notification_handler_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: channel_type
            remarks: the type of the channel, like :channel/email, :channel/slack
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            name: notification_id
            remarks: the notification that the handler is connected to
            type: INTEGER
        - column:
            name: channel_id
            remarks: the channel that the handler is connected to
            type: INTEGER
        - column:
            name: template_id
            remarks: the template that the handler is connected to
            type: INTEGER
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: active
            remarks: whether the handler is active
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp of when the handler was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp of when the handler was updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: which channel to send the notification to
        tableName: notification_handler
- changeSet:
    id: v45.00-73
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: notification_recipient_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: notification_handler_id
            remarks: the handler that the recipient is connected to
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: type
            remarks: the type of the recipient
            type: VARCHAR(64)
        - column:
            name: user_id
            remarks: a user if the recipient has type user
            type: INTEGER
        - column:
            name: permissions_group_id
            remarks: a permissions group if the recipient has type permissions_group
            type: INTEGER
        - column:
            name: details
            remarks: custom details for the recipient
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp of when the recipient was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp of when the recipient was updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: who should receive the notification
        tableName: notification_recipient
- changeSet:
    id: v45.00-74
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: search_index_metadata_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: engine
            remarks: The kind of search engine which this index belongs to.
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            name: version
            remarks: Used to determine metabase compatibility. Format may depend on
              engine in future.
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: index_name
            remarks: The name by which the given engine refers to this particular
              index, e.g. table name.
            type: VARCHAR(254)
        - column:
            name: status
            remarks: One of 'pending', 'active', or 'retired'
            type: VARCHAR(32)
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: The timestamp of when the index was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: The timestamp of when the index status was updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: Each entry corresponds to some queryable index, and contains metadata
          about it.
        tableName: search_index_metadata
- changeSet:
    id: v45.00-75
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: user_key_value_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: user_id
            remarks: The ID of the user this KV-pair is for
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: namespace
            remarks: The namespace for this KV, e.g. "dashboard-filters" or "nobody-knows"
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: key
            remarks: The key
            type: VARCHAR(254)
        - column:
            name: value
            remarks: The value, serialized JSON
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: created_at
            remarks: When this row was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueComputed: now()
            name: updated_at
            remarks: When this row was last updated
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: expires_at
            remarks: If set, when this row expires
            type: TIMESTAMP WITH TIME ZONE
        remarks: A simple key value store for each user.
        tableName: user_key_value
- changeSet:
    id: v45.00-76
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            name: model_index_id
            remarks: The ID of the indexed model.
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: model_pk
            remarks: The primary key of the indexed value
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            remarks: The label to display identifying the indexed value.
            type: TEXT
        remarks: Used to keep track of the values indexed in a model
        tableName: model_index_value
- changeSet:
    id: v45.00-77
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_card_bookmark_card_id
        tableName: card_bookmark
- changeSet:
    id: v45.00-78
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_card_bookmark_user_id
        tableName: card_bookmark
- changeSet:
    id: v45.00-79
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, card_id
        constraintName: unique_card_bookmark_user_id_card_id
        tableName: card_bookmark
- changeSet:
    id: v45.00-80
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: location
        indexName: idx_collection_location
        tableName: collection
- changeSet:
    id: v45.00-81
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: personal_owner_id
        indexName: idx_collection_personal_owner_id
        tableName: collection
- changeSet:
    id: v45.00-82
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT action.id AS entity_id,
              ('action_'::text || action.id) AS entity_qualified_id,
              'action'::text AS entity_type,
              action.created_at,
              action.updated_at,
              action.creator_id,
              action.name,
              action.description,
              NULL::integer AS collection_id,
              action.made_public_by_id AS made_public_by_user,
              NULL::boolean AS is_embedding_enabled,
              action.archived,
              action.type AS action_type,
              action.model_id AS action_model_id,
              NULL::boolean AS collection_is_official,
              NULL::boolean AS collection_is_personal,
              NULL::text AS question_viz_type,
              NULL::text AS question_database_id,
              NULL::boolean AS question_is_native,
              NULL::timestamp without time zone AS event_timestamp
             FROM action
          UNION
           SELECT collection.id AS entity_id,
              ('collection_'::text || collection.id) AS entity_qualified_id,
              'collection'::text AS entity_type,
              collection.created_at,
              NULL::timestamp with time zone AS updated_at,
              NULL::integer AS creator_id,
              collection.name,
              collection.description,
              NULL::integer AS collection_id,
              NULL::integer AS made_public_by_user,
              NULL::boolean AS is_embedding_enabled,
              collection.archived,
              NULL::text AS action_type,
              NULL::integer AS action_model_id,
                  CASE
                      WHEN ((collection.authority_level)::text = 'official'::text) THEN true
                      ELSE false
                  END AS collection_is_official,
                  CASE
                      WHEN (collection.personal_owner_id IS NOT NULL) THEN true
                      ELSE false
                  END AS collection_is_personal,
              NULL::text AS question_viz_type,
              NULL::text AS question_database_id,
              NULL::boolean AS question_is_native,
              NULL::timestamp without time zone AS event_timestamp
             FROM collection
          UNION
           SELECT report_card.id AS entity_id,
              ('card_'::text || report_card.id) AS entity_qualified_id,
              report_card.type AS entity_type,
              report_card.created_at,
              report_card.updated_at,
              report_card.creator_id,
              report_card.name,
              report_card.description,
              report_card.collection_id,
              report_card.made_public_by_id AS made_public_by_user,
              report_card.enable_embedding AS is_embedding_enabled,
              report_card.archived,
              NULL::text AS action_type,
              NULL::integer AS action_model_id,
              NULL::boolean AS collection_is_official,
              NULL::boolean AS collection_is_personal,
              report_card.display AS question_viz_type,
              ('database_'::text || report_card.database_id) AS question_database_id,
                  CASE
                      WHEN ((report_card.query_type)::text = 'native'::text) THEN true
                      ELSE false
                  END AS question_is_native,
              NULL::timestamp without time zone AS event_timestamp
             FROM report_card
          UNION
           SELECT report_dashboard.id AS entity_id,
              ('dashboard_'::text || report_dashboard.id) AS entity_qualified_id,
              'dashboard'::text AS entity_type,
              report_dashboard.created_at,
              report_dashboard.updated_at,
              report_dashboard.creator_id,
              report_dashboard.name,
              report_dashboard.description,
              report_dashboard.collection_id,
              report_dashboard.made_public_by_id AS made_public_by_user,
              report_dashboard.enable_embedding AS is_embedding_enabled,
              report_dashboard.archived,
              NULL::text AS action_type,
              NULL::integer AS action_model_id,
              NULL::boolean AS collection_is_official,
              NULL::boolean AS collection_is_personal,
              NULL::text AS question_viz_type,
              NULL::text AS question_database_id,
              NULL::boolean AS question_is_native,
              NULL::timestamp without time zone AS event_timestamp
             FROM report_dashboard
          UNION
           SELECT event.id AS entity_id,
              ('event_'::text || event.id) AS entity_qualified_id,
              'event'::text AS entity_type,
              event.created_at,
              event.updated_at,
              event.creator_id,
              event.name,
              event.description,
              timeline.collection_id,
              NULL::integer AS made_public_by_user,
              NULL::boolean AS is_embedding_enabled,
              event.archived,
              NULL::text AS action_type,
              NULL::integer AS action_model_id,
              NULL::boolean AS collection_is_official,
              NULL::boolean AS collection_is_personal,
              NULL::text AS question_viz_type,
              NULL::text AS question_database_id,
              NULL::boolean AS question_is_native,
              event."timestamp" AS event_timestamp
             FROM (timeline_event event
               LEFT JOIN timeline ON ((event.timeline_id = timeline.id)));
        viewName: v_content
- changeSet:
    id: v45.00-83
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: type
        indexName: idx_collection_type
        tableName: collection
- changeSet:
    id: v45.00-84
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: collection_entity_id_key
        tableName: collection
- changeSet:
    id: v45.00-85
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: personal_owner_id
        constraintName: unique_collection_personal_owner_id
        tableName: collection
- changeSet:
    id: v45.00-86
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_collection_bookmark_collection_id
        tableName: collection_bookmark
- changeSet:
    id: v45.00-87
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_collection_bookmark_user_id
        tableName: collection_bookmark
- changeSet:
    id: v45.00-88
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, collection_id
        constraintName: unique_collection_bookmark_user_id_collection_id
        tableName: collection_bookmark
- changeSet:
    id: v45.00-89
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_dashboard_bookmark_dashboard_id
        tableName: dashboard_bookmark
- changeSet:
    id: v45.00-90
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_dashboard_bookmark_user_id
        tableName: dashboard_bookmark
- changeSet:
    id: v45.00-91
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, dashboard_id
        constraintName: unique_dashboard_bookmark_user_id_dashboard_id
        tableName: dashboard_bookmark
- changeSet:
    id: v45.00-92
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: session_id
        indexName: idx_session_id
        tableName: login_history
- changeSet:
    id: v45.00-93
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueComputed: now()
            name: timestamp
        indexName: idx_timestamp
        tableName: login_history
- changeSet:
    id: v45.00-94
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_user_id
        tableName: login_history
- changeSet:
    id: v45.00-95
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        - column:
            defaultValueComputed: now()
            name: timestamp
        indexName: idx_user_id_timestamp
        tableName: login_history
- changeSet:
    id: v45.00-96
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        - column:
            name: device_id
        indexName: idx_user_id_device_id
        tableName: login_history
- changeSet:
    id: v45.00-97
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_metabase_database_creator_id
        tableName: metabase_database
- changeSet:
    id: v45.00-98
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT metabase_database.id AS entity_id,
              concat('database_', metabase_database.id) AS entity_qualified_id,
              metabase_database.created_at,
              metabase_database.updated_at,
              metabase_database.name,
              metabase_database.description,
              metabase_database.engine AS database_type,
              metabase_database.metadata_sync_schedule,
              metabase_database.cache_field_values_schedule,
              metabase_database.timezone,
              metabase_database.is_on_demand,
              metabase_database.auto_run_queries,
              metabase_database.cache_ttl,
              metabase_database.creator_id,
              metabase_database.dbms_version AS db_version
             FROM metabase_database
            WHERE (metabase_database.id <> 13371337);
        viewName: v_databases
- changeSet:
    id: v45.00-99
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: metabase_database_entity_id_key
        tableName: metabase_database
- changeSet:
    id: v45.00-100
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: parent_id
        indexName: idx_field_parent_id
        tableName: metabase_field
- changeSet:
    id: v45.00-101
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_field_table_id
        tableName: metabase_field
- changeSet:
    id: v45.00-102
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT metabase_field.id AS entity_id,
              ('field_'::text || metabase_field.id) AS entity_qualified_id,
              metabase_field.created_at,
              metabase_field.updated_at,
              metabase_field.name,
              metabase_field.display_name,
              metabase_field.description,
              metabase_field.base_type,
              metabase_field.visibility_type,
              metabase_field.fk_target_field_id,
              metabase_field.has_field_values,
              metabase_field.active,
              metabase_field.table_id
             FROM metabase_field;
        viewName: v_fields
- changeSet:
    id: v45.00-103
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: (('field_'::text || id))
        indexName: idx_field_entity_qualified_id
        tableName: metabase_field
- changeSet:
    id: v45.00-104
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: lower((name)::text)
        indexName: idx_field_name_lower
        tableName: metabase_field
- changeSet:
    id: v45.00-105
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: name, table_id, unique_field_helper
        constraintName: idx_unique_field
        tableName: metabase_field
- changeSet:
    id: v45.00-106
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: metabase_field_entity_id_key
        tableName: metabase_field
- changeSet:
    id: v45.00-107
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: field_id
        indexName: idx_fieldvalues_field_id
        tableName: metabase_fieldvalues
- changeSet:
    id: v45.00-108
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: db_id
        - column:
            name: schema
        indexName: idx_metabase_table_db_id_schema
        tableName: metabase_table
- changeSet:
    id: v45.00-109
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueBoolean: false
            name: show_in_getting_started
        indexName: idx_metabase_table_show_in_getting_started
        tableName: metabase_table
- changeSet:
    id: v45.00-110
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: db_id
        indexName: idx_table_db_id
        tableName: metabase_table
- changeSet:
    id: v45.00-111
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: db_id
        - column:
            name: name
        indexName: idx_uniq_table_db_id_schema_name_2col
        tableName: metabase_table
        unique: true
- changeSet:
    id: v45.00-112
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT metabase_table.id AS entity_id,
              ('table_'::text || metabase_table.id) AS entity_qualified_id,
              metabase_table.created_at,
              metabase_table.updated_at,
              metabase_table.name,
              metabase_table.display_name,
              metabase_table.description,
              metabase_table.active,
              metabase_table.db_id AS database_id,
              metabase_table.schema,
              metabase_table.is_upload
             FROM metabase_table;
        viewName: v_tables
- changeSet:
    id: v45.00-113
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: db_id, schema, name
        constraintName: idx_uniq_table_db_id_schema_name
        tableName: metabase_table
- changeSet:
    id: v45.00-114
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: metabase_table_entity_id_key
        tableName: metabase_table
- changeSet:
    id: v45.00-115
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_metric_creator_id
        tableName: metric
- changeSet:
    id: v45.00-116
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueBoolean: false
            name: show_in_getting_started
        indexName: idx_metric_show_in_getting_started
        tableName: metric
- changeSet:
    id: v45.00-117
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_metric_table_id
        tableName: metric
- changeSet:
    id: v45.00-118
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: metric_entity_id_key
        tableName: metric
- changeSet:
    id: v45.00-119
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: moderated_item_type
        - column:
            name: moderated_item_id
        indexName: idx_moderation_review_item_type_item_id
        tableName: moderation_review
- changeSet:
    id: v45.00-120
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_snippet_collection_id
        tableName: native_query_snippet
- changeSet:
    id: v45.00-121
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: name
        indexName: idx_snippet_name
        tableName: native_query_snippet
- changeSet:
    id: v45.00-122
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_native_query_snippet_creator_id
        tableName: native_query_snippet
- changeSet:
    id: v45.00-123
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: native_query_snippet_entity_id_key
        tableName: native_query_snippet
- changeSet:
    id: v45.00-124
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: name
        constraintName: native_query_snippet_name_key
        tableName: native_query_snippet
- changeSet:
    id: v45.00-125
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        indexName: idx_permissions_group_membership_group_id
        tableName: permissions_group_membership
- changeSet:
    id: v45.00-126
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        - column:
            name: user_id
        indexName: idx_permissions_group_membership_group_id_user_id
        tableName: permissions_group_membership
- changeSet:
    id: v45.00-127
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_permissions_group_membership_user_id
        tableName: permissions_group_membership
- changeSet:
    id: v45.00-128
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT permissions_group_membership.user_id,
              permissions_group.id AS group_id,
              permissions_group.name AS group_name
             FROM (permissions_group_membership
               LEFT JOIN permissions_group ON ((permissions_group_membership.group_id = permissions_group.id)))
          UNION
           SELECT 0 AS user_id,
              0 AS group_id,
              'Anonymous users'::character varying AS group_name;
        viewName: v_group_members
- changeSet:
    id: v45.00-129
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, group_id
        constraintName: unique_permissions_group_membership_user_id_group_id
        tableName: permissions_group_membership
- changeSet:
    id: v45.00-130
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_persisted_info_creator_id
        tableName: persisted_info
- changeSet:
    id: v45.00-131
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: database_id
        indexName: idx_persisted_info_database_id
        tableName: persisted_info
- changeSet:
    id: v45.00-132
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: card_id
        constraintName: persisted_info_card_id_key
        tableName: persisted_info
- changeSet:
    id: v45.00-133
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_pulse_collection_id
        tableName: pulse
- changeSet:
    id: v45.00-134
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_pulse_creator_id
        tableName: pulse
- changeSet:
    id: v45.00-135
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_pulse_dashboard_id
        tableName: pulse
- changeSet:
    id: v45.00-136
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: pulse_entity_id_key
        tableName: pulse
- changeSet:
    id: v45.00-137
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_pulse_card_card_id
        tableName: pulse_card
- changeSet:
    id: v45.00-138
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: pulse_id
        indexName: idx_pulse_card_pulse_id
        tableName: pulse_card
- changeSet:
    id: v45.00-139
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_card_id
        indexName: idx_pulse_card_dashboard_card_id
        tableName: pulse_card
- changeSet:
    id: v45.00-140
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: pulse_card_entity_id_key
        tableName: pulse_card
- changeSet:
    id: v45.00-141
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: pulse_id
        indexName: idx_pulse_channel_pulse_id
        tableName: pulse_channel
- changeSet:
    id: v45.00-142
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: schedule_type
        indexName: idx_pulse_channel_schedule_type
        tableName: pulse_channel
- changeSet:
    id: v45.00-143
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: pulse_channel_entity_id_key
        tableName: pulse_channel
- changeSet:
    id: v45.00-144
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_card_collection_id
        tableName: report_card
- changeSet:
    id: v45.00-145
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_card_creator_id
        tableName: report_card
- changeSet:
    id: v45.00-146
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: database_id
        indexName: idx_report_card_database_id
        tableName: report_card
- changeSet:
    id: v45.00-147
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: made_public_by_id
        indexName: idx_report_card_made_public_by_id
        tableName: report_card
- changeSet:
    id: v45.00-148
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_report_card_table_id
        tableName: report_card
- changeSet:
    id: v45.00-149
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: source_card_id
        indexName: idx_report_card_source_card_id
        tableName: report_card
- changeSet:
    id: v45.00-150
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_report_card_dashboard_id
        tableName: report_card
- changeSet:
    id: v45.00-151
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: report_card_entity_id_key
        tableName: report_card
- changeSet:
    id: v45.00-152
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: public_uuid
        constraintName: report_card_public_uuid_key
        tableName: report_card
- changeSet:
    id: v45.00-153
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_dashboard_collection_id
        tableName: report_dashboard
- changeSet:
    id: v45.00-154
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_dashboard_creator_id
        tableName: report_dashboard
- changeSet:
    id: v45.00-155
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: public_uuid
        indexName: idx_dashboard_public_uuid
        tableName: report_dashboard
- changeSet:
    id: v45.00-156
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueBoolean: false
            name: show_in_getting_started
        indexName: idx_report_dashboard_show_in_getting_started
        tableName: report_dashboard
- changeSet:
    id: v45.00-157
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: made_public_by_id
        indexName: idx_report_dashboard_made_public_by_id
        tableName: report_dashboard
- changeSet:
    id: v45.00-158
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: report_dashboard_entity_id_key
        tableName: report_dashboard
- changeSet:
    id: v45.00-159
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: public_uuid
        constraintName: report_dashboard_public_uuid_key
        tableName: report_dashboard
- changeSet:
    id: v45.00-160
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: model
        - column:
            name: model_id
        indexName: idx_revision_model_model_id
        tableName: revision
- changeSet:
    id: v45.00-161
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueBoolean: false
            name: most_recent
        indexName: idx_revision_most_recent
        tableName: revision
- changeSet:
    id: v45.00-162
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_revision_user_id
        tableName: revision
- changeSet:
    id: v45.00-163
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_secret_creator_id
        tableName: secret
- changeSet:
    id: v45.00-164
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_segment_creator_id
        tableName: segment
- changeSet:
    id: v45.00-165
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueBoolean: false
            name: show_in_getting_started
        indexName: idx_segment_show_in_getting_started
        tableName: segment
- changeSet:
    id: v45.00-166
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_segment_table_id
        tableName: segment
- changeSet:
    id: v45.00-167
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: segment_entity_id_key
        tableName: segment
- changeSet:
    id: v45.00-168
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: db_id
        indexName: idx_task_history_db_id
        tableName: task_history
- changeSet:
    id: v45.00-169
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: ended_at
        indexName: idx_task_history_end_time
        tableName: task_history
- changeSet:
    id: v45.00-170
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT task_history.id,
              task_history.task,
              ('database_'::text || task_history.db_id) AS database_qualified_id,
              task_history.started_at,
              task_history.ended_at,
              ((task_history.duration)::double precision / (1000)::double precision) AS duration_seconds,
              task_history.task_details AS details
             FROM task_history;
        viewName: v_tasks
- changeSet:
    id: v45.00-171
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            defaultValueComputed: CURRENT_TIMESTAMP
            name: started_at
        indexName: idx_task_history_started_at
        tableName: task_history
- changeSet:
    id: v45.00-172
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_timeline_collection_id
        tableName: timeline
- changeSet:
    id: v45.00-173
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_timeline_creator_id
        tableName: timeline
- changeSet:
    id: v45.00-174
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: timeline_entity_id_key
        tableName: timeline
- changeSet:
    id: v45.00-175
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: timeline_id
        indexName: idx_timeline_event_timeline_id
        tableName: timeline_event
- changeSet:
    id: v45.00-176
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: timeline_id
        - column:
            name: timestamp
        indexName: idx_timeline_event_timeline_id_timestamp
        tableName: timeline_event
- changeSet:
    id: v45.00-177
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_timeline_event_creator_id
        tableName: timeline_event
- changeSet:
    id: v45.00-178
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_bookmark_ordering_user_id
        tableName: bookmark_ordering
- changeSet:
    id: v45.00-179
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, ordering
        constraintName: unique_bookmark_user_id_ordering
        tableName: bookmark_ordering
- changeSet:
    id: v45.00-180
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, type, item_id
        constraintName: unique_bookmark_user_id_type_item_id
        tableName: bookmark_ordering
- changeSet:
    id: v45.00-181
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_card_label_card_id
        tableName: card_label
- changeSet:
    id: v45.00-182
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: label_id
        indexName: idx_card_label_label_id
        tableName: card_label
- changeSet:
    id: v45.00-183
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: card_id, label_id
        constraintName: unique_card_label_card_id_label_id
        tableName: card_label
- changeSet:
    id: v45.00-184
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_cardfavorite_card_id
        tableName: report_cardfavorite
- changeSet:
    id: v45.00-185
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: owner_id
        indexName: idx_cardfavorite_owner_id
        tableName: report_cardfavorite
- changeSet:
    id: v45.00-186
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: card_id, owner_id
        constraintName: idx_unique_cardfavorite_card_id_owner_id
        tableName: report_cardfavorite
- changeSet:
    id: v45.00-187
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_dashboard_favorite_dashboard_id
        tableName: dashboard_favorite
- changeSet:
    id: v45.00-188
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_dashboard_favorite_user_id
        tableName: dashboard_favorite
- changeSet:
    id: v45.00-189
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, dashboard_id
        constraintName: unique_dashboard_favorite_user_id_dashboard_id
        tableName: dashboard_favorite
- changeSet:
    id: v45.00-190
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_dashboardcard_card_id
        tableName: report_dashboardcard
- changeSet:
    id: v45.00-191
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_dashboardcard_dashboard_id
        tableName: report_dashboardcard
- changeSet:
    id: v45.00-192
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: action_id
        indexName: idx_report_dashboardcard_action_id
        tableName: report_dashboardcard
- changeSet:
    id: v45.00-193
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_tab_id
        indexName: idx_report_dashboardcard_dashboard_tab_id
        tableName: report_dashboardcard
- changeSet:
    id: v45.00-194
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT report_dashboardcard.id AS entity_id,
              concat('dashboardcard_', report_dashboardcard.id) AS entity_qualified_id,
              concat('dashboard_', report_dashboardcard.dashboard_id) AS dashboard_qualified_id,
              concat('dashboardtab_', report_dashboardcard.dashboard_tab_id) AS dashboardtab_id,
              concat('card_', report_dashboardcard.card_id) AS card_qualified_id,
              report_dashboardcard.created_at,
              report_dashboardcard.updated_at,
              report_dashboardcard.size_x,
              report_dashboardcard.size_y,
              report_dashboardcard.visualization_settings,
              report_dashboardcard.parameter_mappings
             FROM report_dashboardcard;
        viewName: v_dashboardcard
- changeSet:
    id: v45.00-195
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: report_dashboardcard_entity_id_key
        tableName: report_dashboardcard
- changeSet:
    id: v45.00-196
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_dashboardcard_series_card_id
        tableName: dashboardcard_series
- changeSet:
    id: v45.00-197
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboardcard_id
        indexName: idx_dashboardcard_series_dashboardcard_id
        tableName: dashboardcard_series
- changeSet:
    id: v45.00-198
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dependent_on_id
        indexName: idx_dependency_dependent_on_id
        tableName: dependency
- changeSet:
    id: v45.00-199
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dependent_on_model
        indexName: idx_dependency_dependent_on_model
        tableName: dependency
- changeSet:
    id: v45.00-200
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: model
        indexName: idx_dependency_model
        tableName: dependency
- changeSet:
    id: v45.00-201
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: model_id
        indexName: idx_dependency_model_id
        tableName: dependency
- changeSet:
    id: v45.00-202
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: field_id
        indexName: idx_dimension_field_id
        tableName: dimension
- changeSet:
    id: v45.00-203
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: human_readable_field_id
        indexName: idx_dimension_human_readable_field_id
        tableName: dimension
- changeSet:
    id: v45.00-204
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: dimension_entity_id_key
        tableName: dimension
- changeSet:
    id: v45.00-205
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: field_id
        constraintName: unique_dimension_field_id
        tableName: dimension
- changeSet:
    id: v45.00-206
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        - column:
            name: group_id
        indexName: idx_gtap_table_id_group_id
        tableName: sandboxes
- changeSet:
    id: v45.00-207
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_sandboxes_card_id
        tableName: sandboxes
- changeSet:
    id: v45.00-208
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: table_id, group_id
        constraintName: unique_gtap_table_id_group_id
        tableName: sandboxes
- changeSet:
    id: v45.00-209
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: slug
        indexName: idx_label_slug
        tableName: label
- changeSet:
    id: v45.00-210
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: slug
        constraintName: label_slug_key
        tableName: label
- changeSet:
    id: v45.00-211
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: field_id
        indexName: idx_metric_important_field_field_id
        tableName: metric_important_field
- changeSet:
    id: v45.00-212
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: metric_id
        indexName: idx_metric_important_field_metric_id
        tableName: metric_important_field
- changeSet:
    id: v45.00-213
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: metric_id, field_id
        constraintName: unique_metric_important_field_metric_id_field_id
        tableName: metric_important_field
- changeSet:
    id: v45.00-214
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        indexName: idx_permissions_group_id
        tableName: permissions
- changeSet:
    id: v45.00-215
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        - column:
            name: object
        indexName: idx_permissions_group_id_object
        tableName: permissions
- changeSet:
    id: v45.00-216
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: object
        indexName: idx_permissions_object
        tableName: permissions
- changeSet:
    id: v45.00-217
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: collection_id
        indexName: idx_permissions_collection_id
        tableName: permissions
- changeSet:
    id: v45.00-218
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: perm_type
        indexName: idx_permissions_perm_type
        tableName: permissions
- changeSet:
    id: v45.00-219
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: perm_value
        indexName: idx_permissions_perm_value
        tableName: permissions
- changeSet:
    id: v45.00-220
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: group_id, object
        constraintName: permissions_group_id_object_key
        tableName: permissions
- changeSet:
    id: v45.00-221
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: permissions_group_entity_id_key
        tableName: permissions_group
- changeSet:
    id: v45.00-222
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: name
        constraintName: unique_permissions_group_name
        tableName: permissions_group
- changeSet:
    id: v45.00-223
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: instance_name
        - column:
            name: requests_recovery
        indexName: idx_qrtz_ft_inst_job_req_rcvry
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-224
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: job_name
        - column:
            name: job_group
        indexName: idx_qrtz_ft_j_g
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-225
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: job_group
        indexName: idx_qrtz_ft_jg
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-226
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_name
        - column:
            name: trigger_group
        indexName: idx_qrtz_ft_t_g
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-227
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_group
        indexName: idx_qrtz_ft_tg
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-228
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: instance_name
        indexName: idx_qrtz_ft_trig_inst_name
        tableName: qrtz_fired_triggers
- changeSet:
    id: v45.00-229
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: job_group
        indexName: idx_qrtz_j_grp
        tableName: qrtz_job_details
- changeSet:
    id: v45.00-230
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: requests_recovery
        indexName: idx_qrtz_j_req_recovery
        tableName: qrtz_job_details
- changeSet:
    id: v45.00-231
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: calendar_name
        indexName: idx_qrtz_t_c
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-232
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_group
        indexName: idx_qrtz_t_g
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-233
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: job_name
        - column:
            name: job_group
        indexName: idx_qrtz_t_j
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-234
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: job_group
        indexName: idx_qrtz_t_jg
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-235
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_group
        - column:
            name: trigger_state
        indexName: idx_qrtz_t_n_g_state
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-236
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_name
        - column:
            name: trigger_group
        - column:
            name: trigger_state
        indexName: idx_qrtz_t_n_state
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-237
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: next_fire_time
        indexName: idx_qrtz_t_next_fire_time
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-238
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: misfire_instr
        - column:
            name: next_fire_time
        indexName: idx_qrtz_t_nft_misfire
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-239
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_state
        - column:
            name: next_fire_time
        indexName: idx_qrtz_t_nft_st
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-240
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: misfire_instr
        - column:
            name: next_fire_time
        - column:
            name: trigger_state
        indexName: idx_qrtz_t_nft_st_misfire
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-241
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: misfire_instr
        - column:
            name: next_fire_time
        - column:
            name: trigger_group
        - column:
            name: trigger_state
        indexName: idx_qrtz_t_nft_st_misfire_grp
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-242
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: sched_name
        - column:
            name: trigger_state
        indexName: idx_qrtz_t_state
        tableName: qrtz_triggers
- changeSet:
    id: v45.00-243
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: updated_at
        indexName: idx_query_cache_updated_at
        tableName: query_cache
- changeSet:
    id: v45.00-244
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_query_execution_card_id
        tableName: query_execution
- changeSet:
    id: v45.00-245
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        - column:
            name: started_at
        indexName: idx_query_execution_card_id_started_at
        tableName: query_execution
- changeSet:
    id: v45.00-246
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: hash
        - column:
            name: started_at
        indexName: idx_query_execution_query_hash_started_at
        tableName: query_execution
- changeSet:
    id: v45.00-247
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: started_at
        indexName: idx_query_execution_started_at
        tableName: query_execution
- changeSet:
    id: v45.00-248
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: executor_id
        indexName: idx_query_execution_executor_id
        tableName: query_execution
- changeSet:
    id: v45.00-249
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: context
        indexName: idx_query_execution_context
        tableName: query_execution
- changeSet:
    id: v45.00-250
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: action_id
        indexName: idx_query_execution_action_id
        tableName: query_execution
- changeSet:
    id: v45.00-251
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: (('card_'::text || card_id))
        indexName: idx_query_execution_card_qualified_id
        tableName: query_execution
- changeSet:
    id: v45.00-252
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT query_execution.id AS entity_id,
              query_execution.started_at,
              ((query_execution.running_time)::double precision / (1000)::double precision) AS running_time_seconds,
              query_execution.result_rows,
              query_execution.native AS is_native,
              query_execution.context AS query_source,
              query_execution.error,
              COALESCE(query_execution.executor_id, 0) AS user_id,
              query_execution.card_id,
              ('card_'::text || query_execution.card_id) AS card_qualified_id,
              query_execution.dashboard_id,
              ('dashboard_'::text || query_execution.dashboard_id) AS dashboard_qualified_id,
              query_execution.pulse_id,
              query_execution.database_id,
              ('database_'::text || query_execution.database_id) AS database_qualified_id,
              query_execution.cache_hit,
              query_execution.action_id,
              ('action_'::text || query_execution.action_id) AS action_qualified_id,
              query.query
             FROM (query_execution
               LEFT JOIN query ON ((query_execution.hash = query.query_hash)));
        viewName: v_query_log
- changeSet:
    id: v45.00-253
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_view_log_user_id
        tableName: view_log
- changeSet:
    id: v45.00-254
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: model_id
        indexName: idx_view_log_model_id
        tableName: view_log
- changeSet:
    id: v45.00-255
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: timestamp
        indexName: idx_view_log_timestamp
        tableName: view_log
- changeSet:
    id: v45.00-256
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: ((((model)::text || '_'::text) || model_id))
        indexName: idx_view_log_entity_qualified_id
        tableName: view_log
- changeSet:
    id: v45.00-257
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT view_log.id,
              view_log."timestamp",
              COALESCE(view_log.user_id, 0) AS user_id,
              view_log.model AS entity_type,
              view_log.model_id AS entity_id,
              (((view_log.model)::text || '_'::text) || view_log.model_id) AS entity_qualified_id
             FROM view_log;
        viewName: v_view_log
- changeSet:
    id: v45.00-258
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: public_uuid
        indexName: idx_action_public_uuid
        tableName: action
- changeSet:
    id: v45.00-259
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_action_creator_id
        tableName: action
- changeSet:
    id: v45.00-260
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: made_public_by_id
        indexName: idx_action_made_public_by_id
        tableName: action
- changeSet:
    id: v45.00-261
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: model_id
        indexName: idx_action_model_id
        tableName: action
- changeSet:
    id: v45.00-262
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: action_entity_id_key
        tableName: action
- changeSet:
    id: v45.00-263
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: public_uuid
        constraintName: action_public_uuid_key
        tableName: action
- changeSet:
    id: v45.00-264
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: parameterized_object_id
        indexName: idx_parameter_card_parameterized_object_id
        tableName: parameter_card
- changeSet:
    id: v45.00-265
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_parameter_card_card_id
        tableName: parameter_card
- changeSet:
    id: v45.00-266
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: parameterized_object_id, parameterized_object_type, parameter_id
        constraintName: unique_parameterized_object_card_parameter
        tableName: parameter_card
- changeSet:
    id: v45.00-267
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_dashboard_tab_dashboard_id
        tableName: dashboard_tab
- changeSet:
    id: v45.00-268
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: dashboard_tab_entity_id_key
        tableName: dashboard_tab
- changeSet:
    id: v45.00-269
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: model_id
        indexName: idx_model_index_model_id
        tableName: model_index
- changeSet:
    id: v45.00-270
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_model_index_creator_id
        tableName: model_index
- changeSet:
    id: v45.00-271
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: db_id
        indexName: idx_conn_impersonations_db_id
        tableName: connection_impersonations
- changeSet:
    id: v45.00-272
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        indexName: idx_conn_impersonations_group_id
        tableName: connection_impersonations
- changeSet:
    id: v45.00-273
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: group_id, db_id
        constraintName: conn_impersonation_unique_group_id_db_id
        tableName: connection_impersonations
- changeSet:
    id: v45.00-274
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_table_privileges_table_id
        tableName: table_privileges
- changeSet:
    id: v45.00-275
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: role
        indexName: idx_table_privileges_role
        tableName: table_privileges
- changeSet:
    id: v45.00-276
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_application_permissions_revision_user_id
        tableName: application_permissions_revision
- changeSet:
    id: v45.00-277
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_collection_permission_graph_revision_user_id
        tableName: collection_permission_graph_revision
- changeSet:
    id: v45.00-278
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_core_session_user_id
        tableName: core_session
- changeSet:
    id: v45.00-279
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_permissions_revision_user_id
        tableName: permissions_revision
- changeSet:
    id: v45.00-280
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: pulse_channel_id
        indexName: idx_pulse_channel_recipient_pulse_channel_id
        tableName: pulse_channel_recipient
- changeSet:
    id: v45.00-281
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_pulse_channel_recipient_user_id
        tableName: pulse_channel_recipient
- changeSet:
    id: v45.00-282
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: database_id
        indexName: idx_query_action_database_id
        tableName: query_action
- changeSet:
    id: v45.00-283
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_recent_views_user_id
        tableName: recent_views
- changeSet:
    id: v45.00-284
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: |-
              (
              CASE
                  WHEN ((model)::text = 'Dataset'::text) THEN ('card_'::text || model_id)
                  WHEN (model_id IS NULL) THEN NULL::text
                  ELSE ((lower((model)::text) || '_'::text) || model_id)
              END)
        indexName: idx_audit_log_entity_qualified_id
        tableName: audit_log
- changeSet:
    id: v45.00-285
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT audit_log.id,
                  CASE
                      WHEN ((audit_log.topic)::text = 'card-create'::text) THEN 'card-create'::character varying
                      WHEN ((audit_log.topic)::text = 'card-delete'::text) THEN 'card-delete'::character varying
                      WHEN ((audit_log.topic)::text = 'card-update'::text) THEN 'card-update'::character varying
                      WHEN ((audit_log.topic)::text = 'pulse-create'::text) THEN 'subscription-create'::character varying
                      WHEN ((audit_log.topic)::text = 'pulse-delete'::text) THEN 'subscription-delete'::character varying
                      ELSE audit_log.topic
                  END AS topic,
              audit_log."timestamp",
              NULL::text AS end_timestamp,
              COALESCE(audit_log.user_id, 0) AS user_id,
              lower((audit_log.model)::text) AS entity_type,
              audit_log.model_id AS entity_id,
                  CASE
                      WHEN ((audit_log.model)::text = 'Dataset'::text) THEN ('card_'::text || audit_log.model_id)
                      WHEN (audit_log.model_id IS NULL) THEN NULL::text
                      ELSE ((lower((audit_log.model)::text) || '_'::text) || audit_log.model_id)
                  END AS entity_qualified_id,
              audit_log.details
             FROM audit_log
            WHERE ((audit_log.topic)::text <> ALL ((ARRAY['card-read'::character varying, 'card-query'::character varying, 'dashboard-read'::character varying, 'dashboard-query'::character varying, 'table-read'::character varying])::text[]));
        viewName: v_audit_log
- changeSet:
    id: v45.00-286
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: creator_id
        indexName: idx_api_key_created_by
        tableName: api_key
- changeSet:
    id: v45.00-287
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_api_key_user_id
        tableName: api_key
- changeSet:
    id: v45.00-288
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: updated_by_id
        indexName: idx_api_key_updated_by_id
        tableName: api_key
- changeSet:
    id: v45.00-289
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: key_prefix
        constraintName: api_key_key_prefix_key
        tableName: api_key
- changeSet:
    id: v45.00-290
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: name
        constraintName: api_key_name_key
        tableName: api_key
- changeSet:
    id: v45.00-291
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_data_permissions_table_id
        tableName: data_permissions
- changeSet:
    id: v45.00-292
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: db_id
        indexName: idx_data_permissions_db_id
        tableName: data_permissions
- changeSet:
    id: v45.00-293
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        indexName: idx_data_permissions_group_id
        tableName: data_permissions
- changeSet:
    id: v45.00-294
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        - column:
            name: db_id
        - column:
            name: perm_value
        indexName: idx_data_permissions_group_id_db_id_perm_value
        tableName: data_permissions
- changeSet:
    id: v45.00-295
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: group_id
        - column:
            name: db_id
        - column:
            name: table_id
        - column:
            name: perm_value
        indexName: idx_data_permissions_group_id_db_id_table_id_perm_value
        tableName: data_permissions
- changeSet:
    id: v45.00-296
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_query_field_card_id
        tableName: query_field
- changeSet:
    id: v45.00-297
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: field_id
        indexName: idx_query_field_field_id
        tableName: query_field
- changeSet:
    id: v45.00-298
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: analysis_id
        indexName: idx_query_field_analysis_id
        tableName: query_field
- changeSet:
    id: v45.00-299
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: model, model_id
        constraintName: idx_cache_config_unique_model
        tableName: cache_config
- changeSet:
    id: v45.00-300
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: field_id
        indexName: idx_field_usage_field_id
        tableName: field_usage
- changeSet:
    id: v45.00-301
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_user_parameter_value_user_id
        tableName: user_parameter_value
- changeSet:
    id: v45.00-302
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: dashboard_id
        indexName: idx_user_parameter_value_dashboard_id
        tableName: user_parameter_value
- changeSet:
    id: v45.00-303
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        - column:
            name: dashboard_id
        - column:
            name: parameter_id
        indexName: idx_user_parameter_value_user_id_dashboard_id_parameter_id
        tableName: user_parameter_value
- changeSet:
    id: v45.00-304
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: name
        constraintName: channel_name_key
        tableName: channel
- changeSet:
    id: v45.00-305
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_query_analysis_card_id
        tableName: query_analysis
- changeSet:
    id: v45.00-306
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: card_id
        indexName: idx_query_table_card_id
        tableName: query_table
- changeSet:
    id: v45.00-307
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: analysis_id
        indexName: idx_query_table_analysis_id
        tableName: query_table
- changeSet:
    id: v45.00-308
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: table_id
        indexName: idx_query_table_table_id
        tableName: query_table
- changeSet:
    id: v45.00-309
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: internal_id
        constraintName: notification_internal_id_key
        tableName: notification
- changeSet:
    id: v45.00-310
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: notification_id
        indexName: idx_notification_subscription_notification_id
        tableName: notification_subscription
- changeSet:
    id: v45.00-311
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: notification_id
        indexName: idx_notification_handler_notification_id
        tableName: notification_handler
- changeSet:
    id: v45.00-312
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: channel_id
        indexName: idx_notification_handler_channel_id
        tableName: notification_handler
- changeSet:
    id: v45.00-313
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: template_id
        indexName: idx_notification_handler_template_id
        tableName: notification_handler
- changeSet:
    id: v45.00-314
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: notification_handler_id
        indexName: idx_notification_recipient_notification_handler_id
        tableName: notification_recipient
- changeSet:
    id: v45.00-315
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: user_id
        indexName: idx_notification_recipient_user_id
        tableName: notification_recipient
- changeSet:
    id: v45.00-316
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            name: permissions_group_id
        indexName: idx_notification_recipient_permissions_group_id
        tableName: notification_recipient
- changeSet:
    id: v45.00-317
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: engine, version, status
        constraintName: idx_search_index_metadata_unique_status
        tableName: search_index_metadata
- changeSet:
    id: v45.00-318
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: index_name
        constraintName: search_index_metadata_index_name_key
        tableName: search_index_metadata
- changeSet:
    id: v45.00-319
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: user_id, namespace, key
        constraintName: unique_user_key_value_user_id_namespace_key
        tableName: user_key_value
- changeSet:
    id: v45.00-320
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: id, author, filename
        constraintName: idx_databasechangelog_id_author_filename
        tableName: databasechangelog
- changeSet:
    id: v45.00-321
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: model_index_id, model_pk
        constraintName: unique_model_index_value_model_index_id_model_pk
        tableName: model_index_value
- changeSet:
    id: v45.00-322
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: channel_template_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: name
            remarks: the name of the template
            type: VARCHAR(64)
        - column:
            constraints:
              nullable: false
            name: channel_type
            remarks: the channel type of the template
            type: VARCHAR(64)
        - column:
            name: details
            remarks: the details of the template
            type: TEXT
        - column:
            constraints:
              nullable: false
            name: created_at
            remarks: The timestamp of when the template was created
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            name: updated_at
            remarks: The timestamp of when the template was last updated
            type: TIMESTAMP WITH TIME ZONE
        remarks: custom template for the channel
        tableName: channel_template
- changeSet:
    id: v45.00-323
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            autoIncrement: true
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: core_user_pkey
            name: id
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: email
            type: CITEXT
        - column:
            name: first_name
            type: VARCHAR(254)
        - column:
            name: last_name
            type: VARCHAR(254)
        - column:
            name: password
            type: VARCHAR(254)
        - column:
            defaultValue: default
            name: password_salt
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: date_joined
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: last_login
            type: TIMESTAMP WITH TIME ZONE
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: false
            name: is_superuser
            type: BOOLEAN
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: is_active
            type: BOOLEAN
        - column:
            name: reset_token
            type: VARCHAR(254)
        - column:
            name: reset_triggered
            type: BIGINT
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: is_qbnewb
            type: BOOLEAN
        - column:
            name: login_attributes
            type: TEXT
        - column:
            name: updated_at
            type: TIMESTAMP WITH TIME ZONE
        - column:
            name: sso_source
            type: VARCHAR(254)
        - column:
            name: locale
            type: VARCHAR(5)
        - column:
            constraints:
              nullable: false
            defaultValueBoolean: true
            name: is_datasetnewb
            type: BOOLEAN
        - column:
            name: settings
            type: TEXT
        - column:
            constraints:
              nullable: false
            defaultValue: personal
            name: type
            remarks: The type of user
            type: VARCHAR(64)
        - column:
            name: entity_id
            remarks: NanoID tag for each user
            type: CHAR(21)
        - column:
            name: deactivated_at
            remarks: The timestamp at which a user was deactivated
            type: TIMESTAMP WITH TIME ZONE
        tableName: core_user
- changeSet:
    id: v45.00-324
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_http_action
            name: action_id
            remarks: The related action
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: template
            remarks: A template that defines method,url,body,headers required to make
              an api call
            type: TEXT
        - column:
            name: response_handle
            remarks: A program to take an api response and transform to an appropriate
              response for emitters
            type: TEXT
        - column:
            name: error_handle
            remarks: A program to take an api response to determine if an error occurred
            type: TEXT
        remarks: An http api call type of action
        tableName: http_action
- changeSet:
    id: v45.00-325
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_implicit_action
            name: action_id
            remarks: The associated action
            type: INTEGER
        - column:
            constraints:
              nullable: false
            name: kind
            remarks: The kind of implicit action create/update/delete
            type: TEXT
        remarks: An action with dynamic parameters based on the underlying model
        tableName: implicit_action
- changeSet:
    id: v45.00-326
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_blob_triggers
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_blob_triggers
            name: trigger_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_blob_triggers
            name: trigger_group
            type: VARCHAR(200)
        - column:
            name: blob_data
            type: BYTEA
        tableName: qrtz_blob_triggers
- changeSet:
    id: v45.00-327
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_calendars
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_calendars
            name: calendar_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: calendar
            type: BYTEA
        tableName: qrtz_calendars
- changeSet:
    id: v45.00-328
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_cron_triggers
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_cron_triggers
            name: trigger_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_cron_triggers
            name: trigger_group
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: cron_expression
            type: VARCHAR(120)
        - column:
            name: time_zone_id
            type: VARCHAR(80)
        tableName: qrtz_cron_triggers
- changeSet:
    id: v45.00-329
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_locks
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_locks
            name: lock_name
            type: VARCHAR(40)
        tableName: qrtz_locks
- changeSet:
    id: v45.00-330
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_sched_name
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_sched_name
            name: trigger_group
            type: VARCHAR(200)
        tableName: qrtz_paused_trigger_grps
- changeSet:
    id: v45.00-331
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_scheduler_state
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_scheduler_state
            name: instance_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: last_checkin_time
            type: BIGINT
        - column:
            constraints:
              nullable: false
            name: checkin_interval
            type: BIGINT
        tableName: qrtz_scheduler_state
- changeSet:
    id: v45.00-332
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_simple_triggers
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_simple_triggers
            name: trigger_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_simple_triggers
            name: trigger_group
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
            name: repeat_count
            type: BIGINT
        - column:
            constraints:
              nullable: false
            name: repeat_interval
            type: BIGINT
        - column:
            constraints:
              nullable: false
            name: times_triggered
            type: BIGINT
        tableName: qrtz_simple_triggers
- changeSet:
    id: v45.00-333
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_simprop_triggers
            name: sched_name
            type: VARCHAR(120)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_simprop_triggers
            name: trigger_name
            type: VARCHAR(200)
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: pk_qrtz_simprop_triggers
            name: trigger_group
            type: VARCHAR(200)
        - column:
            name: str_prop_1
            type: VARCHAR(512)
        - column:
            name: str_prop_2
            type: VARCHAR(512)
        - column:
            name: str_prop_3
            type: VARCHAR(512)
        - column:
            name: int_prop_1
            type: INTEGER
        - column:
            name: int_prop_2
            type: INTEGER
        - column:
            name: long_prop_1
            type: BIGINT
        - column:
            name: long_prop_2
            type: BIGINT
        - column:
            name: dec_prop_1
            type: numeric(13, 4)
        - column:
            name: dec_prop_2
            type: numeric(13, 4)
        - column:
            name: bool_prop_1
            type: BOOLEAN
        - column:
            name: bool_prop_2
            type: BOOLEAN
        tableName: qrtz_simprop_triggers
- changeSet:
    id: v45.00-334
    author: alex (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: setting_pkey
            name: key
            type: VARCHAR(254)
        - column:
            constraints:
              nullable: false
            name: value
            type: TEXT
        tableName: setting
- changeSet:
    id: v45.00-335
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: email
        constraintName: core_user_email_key
        tableName: core_user
- changeSet:
    id: v45.00-336
    author: alex (generated)
    changes:
    - addUniqueConstraint:
        columnNames: entity_id
        constraintName: core_user_entity_id_key
        tableName: core_user
- changeSet:
    id: v45.00-337
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: lower((email)::text)
        indexName: idx_lower_email
        tableName: core_user
- changeSet:
    id: v45.00-338
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: ((((first_name)::text || ' '::text) || (last_name)::text))
        indexName: idx_user_full_name
        tableName: core_user
- changeSet:
    id: v45.00-339
    author: alex (generated)
    changes:
    - createIndex:
        columns:
        - column:
            computed: true
            name: (('user_'::text || id))
        indexName: idx_user_qualified_id
        tableName: core_user
- changeSet:
    id: v45.00-340
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: action
        constraintName: fk_action_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-341
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: made_public_by_id
        baseTableName: action
        constraintName: fk_action_made_public_by_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-342
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: model_id
        baseTableName: action
        constraintName: fk_action_model_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-343
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: api_key
        constraintName: fk_api_key_created_by_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-344
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: updated_by_id
        baseTableName: api_key
        constraintName: fk_api_key_updated_by_id_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-345
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: api_key
        constraintName: fk_api_key_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-346
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: bookmark_ordering
        constraintName: fk_bookmark_ordering_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-347
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: card_bookmark
        constraintName: fk_card_bookmark_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-348
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: card_bookmark
        constraintName: fk_card_bookmark_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-349
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: report_card
        constraintName: fk_card_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-350
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: card_label
        constraintName: fk_card_label_ref_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-351
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: label_id
        baseTableName: card_label
        constraintName: fk_card_label_ref_label_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: label
        validate: true
- changeSet:
    id: v45.00-352
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: made_public_by_id
        baseTableName: report_card
        constraintName: fk_card_made_public_by_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-353
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: report_card
        constraintName: fk_card_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-354
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: report_cardfavorite
        constraintName: fk_cardfavorite_ref_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-355
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: owner_id
        baseTableName: report_cardfavorite
        constraintName: fk_cardfavorite_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-356
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: collection_bookmark
        constraintName: fk_collection_bookmark_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-357
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: collection_bookmark
        constraintName: fk_collection_bookmark_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-358
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: personal_owner_id
        baseTableName: collection
        constraintName: fk_collection_personal_owner_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-359
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: collection_permission_graph_revision
        constraintName: fk_collection_revision_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-360
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: db_id
        baseTableName: connection_impersonations
        constraintName: fk_conn_impersonation_db_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_database
        validate: true
- changeSet:
    id: v45.00-361
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: group_id
        baseTableName: connection_impersonations
        constraintName: fk_conn_impersonation_group_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: permissions_group
        validate: true
- changeSet:
    id: v45.00-362
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: dashboard_bookmark
        constraintName: fk_dashboard_bookmark_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-363
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: dashboard_bookmark
        constraintName: fk_dashboard_bookmark_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-364
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: report_dashboard
        constraintName: fk_dashboard_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-365
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: dashboard_favorite
        constraintName: fk_dashboard_favorite_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-366
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: dashboard_favorite
        constraintName: fk_dashboard_favorite_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-367
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: made_public_by_id
        baseTableName: report_dashboard
        constraintName: fk_dashboard_made_public_by_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-368
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: report_dashboard
        constraintName: fk_dashboard_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-369
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: dashboard_tab
        constraintName: fk_dashboard_tab_ref_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-370
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: report_dashboardcard
        constraintName: fk_dashboardcard_ref_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-371
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: report_dashboardcard
        constraintName: fk_dashboardcard_ref_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-372
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: dashboardcard_series
        constraintName: fk_dashboardcard_series_ref_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-373
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboardcard_id
        baseTableName: dashboardcard_series
        constraintName: fk_dashboardcard_series_ref_dashboardcard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboardcard
        validate: true
- changeSet:
    id: v45.00-374
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: db_id
        baseTableName: data_permissions
        constraintName: fk_data_permissions_ref_db_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_database
        validate: true
- changeSet:
    id: v45.00-375
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: group_id
        baseTableName: data_permissions
        constraintName: fk_data_permissions_ref_permissions_group
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: permissions_group
        validate: true
- changeSet:
    id: v45.00-376
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: data_permissions
        constraintName: fk_data_permissions_ref_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-377
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: metabase_database
        constraintName: fk_database_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-378
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: human_readable_field_id
        baseTableName: dimension
        constraintName: fk_dimension_displayfk_ref_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-379
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: field_id
        baseTableName: dimension
        constraintName: fk_dimension_ref_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-380
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: timeline_event
        constraintName: fk_event_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-381
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: timeline_id
        baseTableName: timeline_event
        constraintName: fk_events_timeline_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: timeline
        validate: true
- changeSet:
    id: v45.00-382
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: parent_id
        baseTableName: metabase_field
        constraintName: fk_field_parent_ref_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: RESTRICT
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-383
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: metabase_field
        constraintName: fk_field_ref_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-384
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: field_id
        baseTableName: field_usage
        constraintName: fk_field_usage_field_id_metabase_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-385
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: query_execution_id
        baseTableName: field_usage
        constraintName: fk_field_usage_query_execution_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: query_execution
        validate: true
- changeSet:
    id: v45.00-386
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: field_id
        baseTableName: metabase_fieldvalues
        constraintName: fk_fieldvalues_ref_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-387
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: application_permissions_revision
        constraintName: fk_general_permissions_revision_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-388
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: sandboxes
        constraintName: fk_gtap_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-389
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: group_id
        baseTableName: sandboxes
        constraintName: fk_gtap_group_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: permissions_group
        validate: true
- changeSet:
    id: v45.00-390
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: sandboxes
        constraintName: fk_gtap_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-391
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: action_id
        baseTableName: http_action
        constraintName: fk_http_action_ref_action_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: action
        validate: true
- changeSet:
    id: v45.00-392
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: action_id
        baseTableName: implicit_action
        constraintName: fk_implicit_action_action_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: action
        validate: true
- changeSet:
    id: v45.00-393
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: session_id
        baseTableName: login_history
        constraintName: fk_login_history_session_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_session
        validate: true
- changeSet:
    id: v45.00-394
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: login_history
        constraintName: fk_login_history_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-395
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: field_id
        baseTableName: metric_important_field
        constraintName: fk_metric_important_field_metabase_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-396
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: metric_id
        baseTableName: metric_important_field
        constraintName: fk_metric_important_field_metric_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metric
        validate: true
- changeSet:
    id: v45.00-397
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: metric
        constraintName: fk_metric_ref_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-398
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: metric
        constraintName: fk_metric_ref_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-399
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: model_index
        constraintName: fk_model_index_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-400
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: model_id
        baseTableName: model_index
        constraintName: fk_model_index_model_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-401
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: model_index_id
        baseTableName: model_index_value
        constraintName: fk_model_index_value_model_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: model_index
        validate: true
- changeSet:
    id: v45.00-402
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: channel_id
        baseTableName: notification_handler
        constraintName: fk_notification_handler_channel_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: channel
        validate: true
- changeSet:
    id: v45.00-403
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: notification_id
        baseTableName: notification_handler
        constraintName: fk_notification_handler_notification_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: notification
        validate: true
- changeSet:
    id: v45.00-404
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: template_id
        baseTableName: notification_handler
        constraintName: fk_notification_handler_template_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: channel_template
        validate: true
- changeSet:
    id: v45.00-405
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: notification_handler_id
        baseTableName: notification_recipient
        constraintName: fk_notification_recipient_notification_handler_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: notification_handler
        validate: true
- changeSet:
    id: v45.00-406
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: permissions_group_id
        baseTableName: notification_recipient
        constraintName: fk_notification_recipient_permissions_group_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: permissions_group
        validate: true
- changeSet:
    id: v45.00-407
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: notification_recipient
        constraintName: fk_notification_recipient_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-408
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: notification_id
        baseTableName: notification_subscription
        constraintName: fk_notification_subscription_notification_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: notification
        validate: true
- changeSet:
    id: v45.00-409
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: parameter_card
        constraintName: fk_parameter_card_ref_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-410
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: group_id
        baseTableName: permissions_group_membership
        constraintName: fk_permissions_group_group_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: permissions_group
        validate: true
- changeSet:
    id: v45.00-411
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: group_id
        baseTableName: permissions
        constraintName: fk_permissions_group_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: permissions_group
        validate: true
- changeSet:
    id: v45.00-412
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: permissions_group_membership
        constraintName: fk_permissions_group_membership_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-413
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: permissions
        constraintName: fk_permissions_ref_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-414
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: permissions_revision
        constraintName: fk_permissions_revision_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-415
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: persisted_info
        constraintName: fk_persisted_info_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-416
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: database_id
        baseTableName: persisted_info
        constraintName: fk_persisted_info_database_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_database
        validate: true
- changeSet:
    id: v45.00-417
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: persisted_info
        constraintName: fk_persisted_info_ref_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-418
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: pulse_card
        constraintName: fk_pulse_card_ref_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-419
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_card_id
        baseTableName: pulse_card
        constraintName: fk_pulse_card_ref_pulse_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboardcard
        validate: true
- changeSet:
    id: v45.00-420
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: pulse_id
        baseTableName: pulse_card
        constraintName: fk_pulse_card_ref_pulse_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: pulse
        validate: true
- changeSet:
    id: v45.00-421
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: channel_id
        baseTableName: pulse_channel
        constraintName: fk_pulse_channel_channel_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: channel
        validate: true
- changeSet:
    id: v45.00-422
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: pulse_channel_id
        baseTableName: pulse_channel_recipient
        constraintName: fk_pulse_channel_recipient_ref_pulse_channel_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: pulse_channel
        validate: true
- changeSet:
    id: v45.00-423
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: pulse_channel_recipient
        constraintName: fk_pulse_channel_recipient_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-424
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: pulse_id
        baseTableName: pulse_channel
        constraintName: fk_pulse_channel_ref_pulse_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: pulse
        validate: true
- changeSet:
    id: v45.00-425
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: pulse
        constraintName: fk_pulse_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-426
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: pulse
        constraintName: fk_pulse_ref_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-427
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: pulse
        constraintName: fk_pulse_ref_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-428
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: sched_name,trigger_name,trigger_group
        baseTableName: qrtz_blob_triggers
        constraintName: fk_qrtz_blob_triggers_triggers
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: sched_name,trigger_name,trigger_group
        referencedTableName: qrtz_triggers
        validate: true
- changeSet:
    id: v45.00-429
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: sched_name,trigger_name,trigger_group
        baseTableName: qrtz_cron_triggers
        constraintName: fk_qrtz_cron_triggers_triggers
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: sched_name,trigger_name,trigger_group
        referencedTableName: qrtz_triggers
        validate: true
- changeSet:
    id: v45.00-430
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: sched_name,trigger_name,trigger_group
        baseTableName: qrtz_simple_triggers
        constraintName: fk_qrtz_simple_triggers_triggers
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: sched_name,trigger_name,trigger_group
        referencedTableName: qrtz_triggers
        validate: true
- changeSet:
    id: v45.00-431
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: sched_name,trigger_name,trigger_group
        baseTableName: qrtz_simprop_triggers
        constraintName: fk_qrtz_simprop_triggers_triggers
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: sched_name,trigger_name,trigger_group
        referencedTableName: qrtz_triggers
        validate: true
- changeSet:
    id: v45.00-432
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: sched_name,job_name,job_group
        baseTableName: qrtz_triggers
        constraintName: fk_qrtz_triggers_job_details
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: sched_name,job_name,job_group
        referencedTableName: qrtz_job_details
        validate: true
- changeSet:
    id: v45.00-433
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: database_id
        baseTableName: query_action
        constraintName: fk_query_action_database_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_database
        validate: true
- changeSet:
    id: v45.00-434
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: action_id
        baseTableName: query_action
        constraintName: fk_query_action_ref_action_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: action
        validate: true
- changeSet:
    id: v45.00-435
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: query_analysis
        constraintName: fk_query_analysis_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-436
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: analysis_id
        baseTableName: query_field
        constraintName: fk_query_field_analysis_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: query_analysis
        validate: true
- changeSet:
    id: v45.00-437
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: query_field
        constraintName: fk_query_field_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-438
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: field_id
        baseTableName: query_field
        constraintName: fk_query_field_field_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_field
        validate: true
- changeSet:
    id: v45.00-439
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: analysis_id
        baseTableName: query_table
        constraintName: fk_query_table_analysis_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: query_analysis
        validate: true
- changeSet:
    id: v45.00-440
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: card_id
        baseTableName: query_table
        constraintName: fk_query_table_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-441
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: query_table
        constraintName: fk_query_table_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-442
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: recent_views
        constraintName: fk_recent_views_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-443
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: report_card
        constraintName: fk_report_card_ref_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-444
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: database_id
        baseTableName: report_card
        constraintName: fk_report_card_ref_database_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_database
        validate: true
- changeSet:
    id: v45.00-445
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: report_card
        constraintName: fk_report_card_ref_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-446
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: source_card_id
        baseTableName: report_card
        constraintName: fk_report_card_source_card_id_ref_report_card_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_card
        validate: true
- changeSet:
    id: v45.00-447
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: action_id
        baseTableName: report_dashboardcard
        constraintName: fk_report_dashboardcard_ref_action_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: action
        validate: true
- changeSet:
    id: v45.00-448
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_tab_id
        baseTableName: report_dashboardcard
        constraintName: fk_report_dashboardcard_ref_dashboard_tab_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: dashboard_tab
        validate: true
- changeSet:
    id: v45.00-449
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: revision
        constraintName: fk_revision_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-450
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: secret
        constraintName: fk_secret_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-451
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: segment
        constraintName: fk_segment_ref_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-452
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: segment
        constraintName: fk_segment_ref_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-453
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: core_session
        constraintName: fk_session_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-454
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: native_query_snippet
        constraintName: fk_snippet_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: SET NULL
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-455
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: native_query_snippet
        constraintName: fk_snippet_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-456
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: table_id
        baseTableName: table_privileges
        constraintName: fk_table_privileges_table_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_table
        validate: true
- changeSet:
    id: v45.00-457
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: db_id
        baseTableName: metabase_table
        constraintName: fk_table_ref_database_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: metabase_database
        validate: true
- changeSet:
    id: v45.00-458
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: collection_id
        baseTableName: timeline
        constraintName: fk_timeline_collection_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: collection
        validate: true
- changeSet:
    id: v45.00-459
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: creator_id
        baseTableName: timeline
        constraintName: fk_timeline_creator_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-460
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: user_key_value
        constraintName: fk_user_key_value_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-461
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: dashboard_id
        baseTableName: user_parameter_value
        constraintName: fk_user_parameter_value_dashboard_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: report_dashboard
        validate: true
- changeSet:
    id: v45.00-462
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: user_parameter_value
        constraintName: fk_user_parameter_value_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-463
    author: alex (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: user_id
        baseTableName: view_log
        constraintName: fk_view_log_ref_user_id
        deferrable: false
        initiallyDeferred: false
        onDelete: CASCADE
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: core_user
        validate: true
- changeSet:
    id: v45.00-464
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          WITH agg_recipients AS (
                   SELECT pulse_channel_recipient.pulse_channel_id,
                      string_agg((core_user.email)::text, ','::text) AS recipients
                     FROM (pulse_channel_recipient
                       LEFT JOIN core_user ON ((pulse_channel_recipient.user_id = core_user.id)))
                    GROUP BY pulse_channel_recipient.pulse_channel_id
                  )
           SELECT pulse.id AS entity_id,
              ('pulse_'::text || pulse.id) AS entity_qualified_id,
              pulse.created_at,
              pulse.updated_at,
              pulse.creator_id,
              pulse_card.card_id,
              ('card_'::text || pulse_card.card_id) AS card_qualified_id,
              pulse.alert_condition,
              pulse_channel.schedule_type,
              pulse_channel.schedule_day,
              pulse_channel.schedule_hour,
              pulse.archived,
              pulse_channel.channel_type AS recipient_type,
              agg_recipients.recipients,
              pulse_channel.details AS recipient_external
             FROM (((pulse
               LEFT JOIN pulse_card ON ((pulse.id = pulse_card.pulse_id)))
               LEFT JOIN pulse_channel ON ((pulse.id = pulse_channel.pulse_id)))
               LEFT JOIN agg_recipients ON ((pulse_channel.id = agg_recipients.pulse_channel_id)))
            WHERE (pulse.alert_condition IS NOT NULL);
        viewName: v_alerts
- changeSet:
    id: v45.00-465
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          WITH agg_recipients AS (
                   SELECT pulse_channel_recipient.pulse_channel_id,
                      string_agg((core_user.email)::text, ','::text) AS recipients
                     FROM (pulse_channel_recipient
                       LEFT JOIN core_user ON ((pulse_channel_recipient.user_id = core_user.id)))
                    GROUP BY pulse_channel_recipient.pulse_channel_id
                  )
           SELECT pulse.id AS entity_id,
              ('pulse_'::text || pulse.id) AS entity_qualified_id,
              pulse.created_at,
              pulse.updated_at,
              pulse.creator_id,
              pulse.archived,
              ('dashboard_'::text || pulse.dashboard_id) AS dashboard_qualified_id,
              pulse_channel.schedule_type,
              pulse_channel.schedule_day,
              pulse_channel.schedule_hour,
              pulse_channel.channel_type AS recipient_type,
              agg_recipients.recipients,
              pulse_channel.details AS recipient_external,
              pulse.parameters
             FROM ((pulse
               LEFT JOIN pulse_channel ON ((pulse.id = pulse_channel.pulse_id)))
               LEFT JOIN agg_recipients ON ((pulse_channel.id = agg_recipients.pulse_channel_id)))
            WHERE (pulse.alert_condition IS NULL);
        viewName: v_subscriptions
- changeSet:
    id: v45.00-466
    author: alex (generated)
    changes:
    - createView:
        fullDefinition: false
        selectQuery: |-
          SELECT core_user.id AS user_id,
              ('user_'::text || core_user.id) AS entity_qualified_id,
              core_user.type,
                  CASE
                      WHEN ((core_user.type)::text = 'api-key'::text) THEN NULL::citext
                      ELSE core_user.email
                  END AS email,
              core_user.first_name,
              core_user.last_name,
              (((core_user.first_name)::text || ' '::text) || (core_user.last_name)::text) AS full_name,
              core_user.date_joined,
              core_user.last_login,
              core_user.updated_at,
              core_user.is_superuser AS is_admin,
              core_user.is_active,
              core_user.sso_source,
              core_user.locale
             FROM core_user
          UNION
           SELECT 0 AS user_id,
              'user_0'::text AS entity_qualified_id,
              'anonymous'::character varying AS type,
              NULL::citext AS email,
              'External'::character varying AS first_name,
              'User'::character varying AS last_name,
              'External User'::text AS full_name,
              NULL::timestamp with time zone AS date_joined,
              NULL::timestamp with time zone AS last_login,
              NULL::timestamp with time zone AS updated_at,
              false AS is_admin,
              NULL::boolean AS is_active,
              NULL::character varying AS sso_source,
              NULL::character varying AS locale;
        viewName: v_users

